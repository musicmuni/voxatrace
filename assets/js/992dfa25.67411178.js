"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[11031],{28453(e,a,r){r.d(a,{R:()=>l,x:()=>s});var n=r(96540);const t={},i=n.createContext(t);function l(e){const a=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),n.createElement(i.Provider,{value:a},e.children)}},36659(e,a,r){r.r(a),r.d(a,{assets:()=>c,contentTitle:()=>s,default:()=>x,frontMatter:()=>l,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-melody-eval/index","title":"index","description":"//voxatrace/com.musicmuni.voxatrace.calibra/CalibraMelodyEval","source":"@site/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-melody-eval/index.md","sourceDirName":"api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-melody-eval","slug":"/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-melody-eval/","permalink":"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-melody-eval/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"apiSidebar","previous":{"title":"student-key-hz","permalink":"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-live-eval/student-key-hz"},"next":{"title":"evaluate","permalink":"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-melody-eval/evaluate"}}');var t=r(74848),i=r(28453);const l={},s="CalibraMelodyEval",c={},o=[{value:"What is Melody Evaluation?",id:"what-is-melody-evaluation",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Kotlin",id:"kotlin",level:3},{value:"Swift",id:"swift",level:3},{value:"Platform Notes",id:"platform-notes",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"See also",id:"see-also",level:4},{value:"Functions",id:"functions",level:2}];function d(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.p,{children:["//",(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/",children:"voxatrace"}),"/",(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/",children:"com.musicmuni.voxatrace.calibra"}),"/",(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-melody-eval/",children:"CalibraMelodyEval"})]}),"\n",(0,t.jsx)(a.header,{children:(0,t.jsx)(a.h1,{id:"calibramelodyeval",children:"CalibraMelodyEval"})}),"\n",(0,t.jsxs)(a.p,{children:["object ",(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-melody-eval/",children:"CalibraMelodyEval"})]}),"\n",(0,t.jsx)(a.p,{children:"Offline melody/song evaluation for post-recording analysis."}),"\n",(0,t.jsx)(a.h2,{id:"what-is-melody-evaluation",children:"What is Melody Evaluation?"}),"\n",(0,t.jsxs)(a.p,{children:["Melody evaluation compares a ",(0,t.jsx)(a.strong,{children:"complete recorded performance"})," against a reference melody after the fact. Unlike live evaluation (real-time), this analyzes pre-recorded audio."]}),"\n",(0,t.jsx)(a.p,{children:"Use it for:"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"Post-recording feedback"}),": Score a recording after the session ends"]}),"\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"Batch processing"}),": Analyze multiple recordings at once"]}),"\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"Detailed analysis"}),": More thorough analysis than real-time allows"]}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,t.jsxs)(a.table,{children:[(0,t.jsx)(a.thead,{children:(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.th,{children:"Scenario"}),(0,t.jsx)(a.th,{children:"Use This?"}),(0,t.jsx)(a.th,{children:"Why"})]})}),(0,t.jsxs)(a.tbody,{children:[(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:"Analyze recorded audio"}),(0,t.jsx)(a.td,{children:"Yes"}),(0,t.jsx)(a.td,{children:"Core use case"})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:"Real-time scoring"}),(0,t.jsx)(a.td,{children:"No"}),(0,t.jsxs)(a.td,{children:["Use ",(0,t.jsx)(a.code,{children:"CalibraLiveEval"})]})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:"Evaluate scales/exercises"}),(0,t.jsx)(a.td,{children:"No"}),(0,t.jsxs)(a.td,{children:["Use ",(0,t.jsx)(a.code,{children:"CalibraNoteEval"})]})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:"Just detect pitch"}),(0,t.jsx)(a.td,{children:"No"}),(0,t.jsxs)(a.td,{children:["Use ",(0,t.jsx)(a.code,{children:"CalibraPitch"})]})]})]})]}),"\n",(0,t.jsx)(a.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,t.jsx)(a.h3,{id:"kotlin",children:"Kotlin"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-kotlin",children:'val reference = LessonMaterial.fromAudio(\n    samples = referenceAudio,\n    sampleRate = 16000,\n    segments = listOf(\n        Segment(0, 0.0f, 3.5f, "First line"),\n        Segment(1, 3.5f, 7.0f, "Second line")\n    ),\n    keyHz = 261.63f  // Middle C\n)\n\nval student = LessonMaterial.fromAudio(\n    samples = studentAudio,\n    sampleRate = 16000,\n    segments = emptyList(),  // Uses reference segments\n    keyHz = 261.63f\n)\n\nval extractor = CalibraPitch.createContourExtractor(ContourExtractorConfig.SCORING)\nval result = CalibraMelodyEval.evaluate(reference, student, extractor)\nextractor.release()\n\nprintln("Overall: ${result.overallScorePercent}%")\nresult.segmentResults.forEach { (index, attempts) ->\n    println("Segment $index: ${attempts.last().scorePercent}%")\n}\n'})}),"\n",(0,t.jsx)(a.h3,{id:"swift",children:"Swift"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-swift",children:'let reference = LessonMaterial.fromAudio(\n    samples: referenceAudio,\n    sampleRate: 16000,\n    segments: [\n        Segment(index: 0, startSeconds: 0.0, endSeconds: 3.5, label: "First line"),\n        Segment(index: 1, startSeconds: 3.5, endSeconds: 7.0, label: "Second line")\n    ],\n    keyHz: 261.63\n)\n\nlet student = LessonMaterial.fromAudio(\n    samples: studentAudio,\n    sampleRate: 16000,\n    segments: [],\n    keyHz: 261.63\n)\n\nlet extractor = CalibraPitch.companion.createContourExtractor(\n    config: ContourExtractorConfig.companion.SCORING\n)\nlet result = CalibraMelodyEval.companion.evaluate(\n    reference: reference,\n    student: student,\n    contourExtractor: extractor\n)\nextractor.release()\n\nprint("Overall: \\(result.overallScorePercent)%")\n'})}),"\n",(0,t.jsx)(a.h2,{id:"platform-notes",children:"Platform Notes"}),"\n",(0,t.jsx)(a.h3,{id:"ios",children:"iOS"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Audio must be 16kHz mono; use SonixDecoder to decode and resample"}),"\n",(0,t.jsx)(a.li,{children:"Contour extractor must be released after use"}),"\n"]}),"\n",(0,t.jsx)(a.h3,{id:"android",children:"Android"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Audio must be 16kHz mono; use SonixDecoder to decode and resample"}),"\n",(0,t.jsx)(a.li,{children:"Runs on background thread; wrap in coroutine if needed"}),"\n"]}),"\n",(0,t.jsx)(a.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"Wrong sample rate"}),": Audio must be 16kHz; use SonixDecoder with default settings"]}),"\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"Forgetting to release extractor"}),": Call ",(0,t.jsx)(a.code,{children:"extractor.release()"})," when done"]}),"\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"Empty segments"}),": If student.segments is empty, reference.segments is used"]}),"\n",(0,t.jsxs)(a.li,{children:[(0,t.jsx)(a.strong,{children:"Key mismatch"}),": Set studentKeyHz if student sings in different key"]}),"\n"]}),"\n",(0,t.jsx)(a.h4,{id:"see-also",children:"See also"}),"\n",(0,t.jsxs)(a.table,{children:[(0,t.jsx)(a.thead,{children:(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.th,{}),(0,t.jsx)(a.th,{})]})}),(0,t.jsxs)(a.tbody,{children:[(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-live-eval/",children:"CalibraLiveEval"})}),(0,t.jsx)(a.td,{children:"For real-time evaluation during singing"})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-note-eval/",children:"CalibraNoteEval"})}),(0,t.jsx)(a.td,{children:"For note-by-note exercise evaluation"})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra.model/-lesson-material/",children:"LessonMaterial"})}),(0,t.jsx)(a.td,{children:"For input format specification"})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra.model/-singing-result/",children:"SingingResult"})}),(0,t.jsx)(a.td,{children:"For understanding evaluation results"})]})]})]}),"\n",(0,t.jsx)(a.h2,{id:"functions",children:"Functions"}),"\n",(0,t.jsxs)(a.table,{children:[(0,t.jsx)(a.thead,{children:(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.th,{children:"Name"}),(0,t.jsx)(a.th,{children:"Summary"})]})}),(0,t.jsx)(a.tbody,{children:(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.td,{children:(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-melody-eval/evaluate",children:"evaluate"})}),(0,t.jsxs)(a.td,{children:["[common]",(0,t.jsx)("br",{}),"fun ",(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-melody-eval/evaluate",children:"evaluate"}),"(reference: ",(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra.model/-lesson-material/",children:"LessonMaterial"}),", student: ",(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra.model/-lesson-material/",children:"LessonMaterial"}),", contourExtractor: ",(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/-contour-extractor/",children:"CalibraPitch.ContourExtractor"}),"): ",(0,t.jsx)(a.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra.model/-singing-result/",children:"SingingResult"}),(0,t.jsx)("br",{}),"Evaluate a melody performance against a reference."]})]})})]})]})}function x(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);