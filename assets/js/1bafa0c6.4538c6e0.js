"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[78475],{28453(e,i,t){t.d(i,{R:()=>n,x:()=>o});var r=t(96540);const c={},a=r.createContext(c);function n(e){const i=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:n(e.components),r.createElement(a.Provider,{value:i},e.children)}},95023(e,i,t){t.r(i),t.d(i,{assets:()=>s,contentTitle:()=>o,default:()=>h,frontMatter:()=>n,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/index","title":"index","description":"//voxatrace/com.musicmuni.voxatrace.calibra/CalibraPitch","source":"@site/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/index.md","sourceDirName":"api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch","slug":"/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/","permalink":"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"apiSidebar","previous":{"title":"evaluate","permalink":"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-note-eval/evaluate"},"next":{"title":"index","permalink":"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/-companion/"}}');var c=t(74848),a=t(28453);const n={},o="CalibraPitch",s={},l=[{value:"What is Pitch Detection?",id:"what-is-pitch-detection",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Kotlin",id:"kotlin",level:3},{value:"Swift",id:"swift",level:3},{value:"Usage Tiers (ADR-001)",id:"usage-tiers-adr-001",level:2},{value:"Tier 1: Defaults (80% of users)",id:"tier-1-defaults-80-of-users",level:3},{value:"Kotlin",id:"kotlin-1",level:4},{value:"Swift",id:"swift-1",level:4},{value:"Tier 2: Builder (15% of users)",id:"tier-2-builder-15-of-users",level:3},{value:"Kotlin",id:"kotlin-2",level:4},{value:"Swift",id:"swift-2",level:4},{value:"Tier 3: .copy() (5% of users)",id:"tier-3-copy-5-of-users",level:3},{value:"Kotlin",id:"kotlin-3",level:4},{value:"Batch Extraction (Recorded Audio Files)",id:"batch-extraction-recorded-audio-files",level:2},{value:"Kotlin",id:"kotlin-4",level:3},{value:"Swift",id:"swift-3",level:3},{value:"Post-Processing",id:"post-processing",level:2},{value:"Kotlin",id:"kotlin-5",level:3},{value:"Swift",id:"swift-4",level:3},{value:"Platform Notes",id:"platform-notes",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Common Pitfalls",id:"common-pitfalls",level:2},{value:"See also",id:"see-also",level:4},{value:"Types",id:"types",level:2}];function d(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(i.p,{children:["//",(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/",children:"voxatrace"}),"/",(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/",children:"com.musicmuni.voxatrace.calibra"}),"/",(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/",children:"CalibraPitch"})]}),"\n",(0,c.jsx)(i.header,{children:(0,c.jsx)(i.h1,{id:"calibrapitch",children:"CalibraPitch"})}),"\n",(0,c.jsxs)(i.p,{children:["class ",(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/",children:"CalibraPitch"})]}),"\n",(0,c.jsx)(i.p,{children:"Unified pitch detection API for singing and speech analysis."}),"\n",(0,c.jsx)(i.h2,{id:"what-is-pitch-detection",children:"What is Pitch Detection?"}),"\n",(0,c.jsxs)(i.p,{children:["Pitch detection finds the ",(0,c.jsx)(i.strong,{children:"fundamental frequency (F0)"})," of audio - the note being sung or spoken. For example, when you sing an A4, the pitch detector outputs 440 Hz."]}),"\n",(0,c.jsx)(i.p,{children:"This is essential for:"}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.strong,{children:"Singing apps"}),": Show singers if they're on pitch"]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.strong,{children:"Tuner apps"}),": Help musicians tune their instruments"]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.strong,{children:"Music education"}),": Score student performances against reference"]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.strong,{children:"Voice analysis"}),": Track pitch patterns in speech"]}),"\n"]}),"\n",(0,c.jsx)(i.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,c.jsxs)(i.table,{children:[(0,c.jsx)(i.thead,{children:(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.th,{children:"Use Case"}),(0,c.jsx)(i.th,{children:"API"}),(0,c.jsx)(i.th,{children:"Example"})]})}),(0,c.jsxs)(i.tbody,{children:[(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:"Live tuner display"}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"createDetector()"})}),(0,c.jsx)(i.td,{children:"Show pitch meter in real-time"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:"Karaoke scoring"}),(0,c.jsxs)(i.td,{children:[(0,c.jsx)(i.code,{children:"createDetector()"})," + ",(0,c.jsx)(i.code,{children:"CalibraLiveEval"})]}),(0,c.jsx)(i.td,{children:"Score singing while playing"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:"Analyze recorded audio"}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"createContourExtractor()"})}),(0,c.jsx)(i.td,{children:"Extract pitch from audio files"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:"Post-process contours"}),(0,c.jsx)(i.td,{children:(0,c.jsx)(i.code,{children:"PostProcess"})}),(0,c.jsx)(i.td,{children:"Clean up octave errors, smooth noise"})]})]})]}),"\n",(0,c.jsx)(i.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,c.jsx)(i.h3,{id:"kotlin",children:"Kotlin"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-kotlin",children:'// Real-time pitch detection\nval detector = CalibraPitch.createDetector()\nval point = detector.detect(audioBuffer, sampleRate = 16000)\nprintln("Pitch: ${point.pitch} Hz, Confidence: ${point.confidence}")\ndetector.close()\n'})}),"\n",(0,c.jsx)(i.h3,{id:"swift",children:"Swift"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-swift",children:'// Real-time pitch detection\nlet detector = CalibraPitch.companion.createDetector()\nlet point = detector.detect(samples: audioBuffer, sampleRate: 16000)\nprint("Pitch: \\(point.pitch) Hz, Confidence: \\(point.confidence)")\ndetector.close()\n'})}),"\n",(0,c.jsx)(i.h2,{id:"usage-tiers-adr-001",children:"Usage Tiers (ADR-001)"}),"\n",(0,c.jsx)(i.h3,{id:"tier-1-defaults-80-of-users",children:"Tier 1: Defaults (80% of users)"}),"\n",(0,c.jsx)(i.h4,{id:"kotlin-1",children:"Kotlin"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-kotlin",children:"val detector = CalibraPitch.createDetector(PitchDetectorConfig.BALANCED)\nval point = detector.detect(buffer, sampleRate)\ndetector.close()\n"})}),"\n",(0,c.jsx)(i.h4,{id:"swift-1",children:"Swift"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-swift",children:"let detector = CalibraPitch.companion.createDetector(config: PitchDetectorConfig.companion.BALANCED)\nlet point = detector.detect(samples: buffer, sampleRate: sampleRate)\ndetector.close()\n"})}),"\n",(0,c.jsx)(i.h3,{id:"tier-2-builder-15-of-users",children:"Tier 2: Builder (15% of users)"}),"\n",(0,c.jsx)(i.h4,{id:"kotlin-2",children:"Kotlin"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-kotlin",children:"val config = PitchDetectorConfig.Builder()\n    .algorithm(PitchAlgorithm.SWIFT_F0)\n    .voiceType(VoiceType.carnaticMale)\n    .enableProcessing()\n    .build()\nval detector = CalibraPitch.createDetector(config, modelProvider = { ModelLoader.loadSwiftF0() })\n"})}),"\n",(0,c.jsx)(i.h4,{id:"swift-2",children:"Swift"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-swift",children:"let config = PitchDetectorConfig.Builder()\n    .algorithm(algorithm: .swiftF0)\n    .voiceType(voiceType: .carnaticMale)\n    .enableProcessing()\n    .build()\nlet detector = CalibraPitch.companion.createDetector(\n    config: config,\n    modelProvider: { ModelLoader.shared.loadSwiftF0() }\n)\n"})}),"\n",(0,c.jsx)(i.h3,{id:"tier-3-copy-5-of-users",children:"Tier 3: .copy() (5% of users)"}),"\n",(0,c.jsx)(i.h4,{id:"kotlin-3",children:"Kotlin"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-kotlin",children:"val config = PitchDetectorConfig.PRECISE.copy(tolerance = 0.08f)\nval detector = CalibraPitch.createDetector(config)\n"})}),"\n",(0,c.jsx)(i.h2,{id:"batch-extraction-recorded-audio-files",children:"Batch Extraction (Recorded Audio Files)"}),"\n",(0,c.jsx)(i.h3,{id:"kotlin-4",children:"Kotlin"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-kotlin",children:"val extractor = CalibraPitch.createContourExtractor(\n    ContourExtractorConfig.SCORING,\n    modelProvider = { ModelLoader.loadSwiftF0() }\n)\nval contour = extractor.extract(audioSamples, sampleRate = 16000)\nextractor.release()\n"})}),"\n",(0,c.jsx)(i.h3,{id:"swift-3",children:"Swift"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-swift",children:"let extractor = CalibraPitch.companion.createContourExtractor(\n    config: ContourExtractorConfig.companion.SCORING,\n    modelProvider: { ModelLoader.shared.loadSwiftF0() }\n)\nlet contour = extractor.extract(audio: audioSamples, sampleRate: 16000)\nextractor.release()\n"})}),"\n",(0,c.jsx)(i.h2,{id:"post-processing",children:"Post-Processing"}),"\n",(0,c.jsx)(i.h3,{id:"kotlin-5",children:"Kotlin"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-kotlin",children:"// Apply cleanup presets to contours\nval cleaned = CalibraPitch.PostProcess.cleanup(contour, ContourCleanup.SCORING)\n\n// Or individual operations\nval smoothed = CalibraPitch.PostProcess.smooth(contour)\n"})}),"\n",(0,c.jsx)(i.h3,{id:"swift-4",children:"Swift"}),"\n",(0,c.jsx)(i.pre,{children:(0,c.jsx)(i.code,{className:"language-swift",children:"// Apply cleanup presets to contours\nlet cleaned = CalibraPitch.PostProcess.shared.cleanup(contour: contour, options: ContourCleanup.companion.SCORING)\n\n// Or individual operations\nlet smoothed = CalibraPitch.PostProcess.shared.smooth(contour: contour)\n"})}),"\n",(0,c.jsx)(i.h2,{id:"platform-notes",children:"Platform Notes"}),"\n",(0,c.jsx)(i.h3,{id:"ios",children:"iOS"}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsx)(i.li,{children:"Audio input is typically 48kHz; resampled internally to 16kHz"}),"\n",(0,c.jsxs)(i.li,{children:["SwiftF0 requires ",(0,c.jsx)(i.code,{children:"ai-models"})," module with ONNX runtime"]}),"\n",(0,c.jsxs)(i.li,{children:["Use ",(0,c.jsx)(i.code,{children:"@ShouldRefineInSwift"})," methods with provided Swift extensions"]}),"\n"]}),"\n",(0,c.jsx)(i.h3,{id:"android",children:"Android"}),"\n",(0,c.jsxs)(i.ul,{children:["\n",(0,c.jsx)(i.li,{children:"Audio input is typically 44.1kHz or 16kHz depending on device"}),"\n",(0,c.jsx)(i.li,{children:"SwiftF0 uses ONNX Runtime for Android"}),"\n",(0,c.jsx)(i.li,{children:"YIN algorithm has no external dependencies"}),"\n"]}),"\n",(0,c.jsx)(i.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,c.jsxs)(i.ol,{children:["\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.strong,{children:"Forgetting to close/release"}),": Always call ",(0,c.jsx)(i.code,{children:"detector.close()"})," or ",(0,c.jsx)(i.code,{children:"extractor.release()"})]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.strong,{children:"Wrong sample rate"}),": Pass the actual hardware sample rate; internal resampling handles the rest"]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.strong,{children:"SwiftF0 without model"}),": Register model at startup: ",(0,c.jsx)(i.code,{children:"AIModelRegistry.registerSwiftF0 { ... }"})]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.strong,{children:"Octave errors in contours"}),": Use ",(0,c.jsx)(i.code,{children:"ContourCleanup.SCORING"})," or ",(0,c.jsx)(i.code,{children:"PostProcess.correctOctaveErrors()"})]}),"\n",(0,c.jsxs)(i.li,{children:[(0,c.jsx)(i.strong,{children:"Low confidence in quiet audio"}),": Use ",(0,c.jsx)(i.code,{children:"QuietHandling.LENIENT"})," for soft singers"]}),"\n"]}),"\n",(0,c.jsx)(i.h4,{id:"see-also",children:"See also"}),"\n",(0,c.jsxs)(i.table,{children:[(0,c.jsx)(i.thead,{children:(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.th,{}),(0,c.jsx)(i.th,{})]})}),(0,c.jsxs)(i.tbody,{children:[(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-live-eval/",children:"CalibraLiveEval"})}),(0,c.jsx)(i.td,{children:"For live singing evaluation with scoring"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-v-a-d/",children:"CalibraVAD"})}),(0,c.jsx)(i.td,{children:"For detecting when someone is singing vs. silence"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra.model/-pitch-detector-config/",children:"PitchDetectorConfig"})}),(0,c.jsx)(i.td,{children:"Configuration options for real-time detection"})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-contour-extractor-config/",children:"ContourExtractorConfig"})}),(0,c.jsx)(i.td,{children:"Configuration options for batch extraction"})]})]})]}),"\n",(0,c.jsx)(i.h2,{id:"types",children:"Types"}),"\n",(0,c.jsxs)(i.table,{children:[(0,c.jsx)(i.thead,{children:(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.th,{children:"Name"}),(0,c.jsx)(i.th,{children:"Summary"})]})}),(0,c.jsxs)(i.tbody,{children:[(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/-companion/",children:"Companion"})}),(0,c.jsxs)(i.td,{children:["[common]",(0,c.jsx)("br",{}),"object ",(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/-companion/",children:"Companion"})]})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/-contour-extractor/",children:"ContourExtractor"})}),(0,c.jsxs)(i.td,{children:["[common]",(0,c.jsx)("br",{}),"class ",(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/-contour-extractor/",children:"ContourExtractor"}),(0,c.jsx)("br",{}),"Pitch contour extractor for batch processing of complete audio files."]})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/-detector/",children:"Detector"})}),(0,c.jsxs)(i.td,{children:["[common]",(0,c.jsx)("br",{}),"abstract class ",(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/-detector/",children:"Detector"}),(0,c.jsx)("br",{}),"Realtime pitch detector for processing audio buffers."]})]}),(0,c.jsxs)(i.tr,{children:[(0,c.jsx)(i.td,{children:(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/-post-process/",children:"PostProcess"})}),(0,c.jsxs)(i.td,{children:["[common]",(0,c.jsx)("br",{}),"object ",(0,c.jsx)(i.a,{href:"/voxatrace/docs/api/voxatrace/com.musicmuni.voxatrace.calibra/-calibra-pitch/-post-process/",children:"PostProcess"}),(0,c.jsx)("br",{}),"Post-processing utilities for pitch arrays."]})]})]})]})]})}function h(e={}){const{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,c.jsx)(i,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}}}]);