"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2052],{1185(e,n,r){r.r(n),r.d(n,{assets:()=>t,contentTitle:()=>s,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"guides/playing-audio","title":"Playing Audio","description":"A complete guide to audio playback with SonixPlayer.","source":"@site/docs/guides/playing-audio.md","sourceDirName":"guides","slug":"/guides/playing-audio","permalink":"/voxatrace/guides/playing-audio","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Audio Effects","permalink":"/voxatrace/concepts/audio-effects"},"next":{"title":"Recording Audio","permalink":"/voxatrace/guides/recording-audio"}}');var i=r(4848),a=r(8453);const o={sidebar_position:1},s="Playing Audio",t={},d=[{value:"What You&#39;ll Learn",id:"what-youll-learn",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"Kotlin",id:"kotlin",level:3},{value:"Swift",id:"swift",level:3},{value:"Loading Audio",id:"loading-audio",level:2},{value:"From File Path",id:"from-file-path",level:3},{value:"From Assets (Android)",id:"from-assets-android",level:3},{value:"From Bundle (iOS)",id:"from-bundle-ios",level:3},{value:"From Raw PCM Data",id:"from-raw-pcm-data",level:3},{value:"Playback Controls",id:"playback-controls",level:2},{value:"Basic Controls",id:"basic-controls",level:3},{value:"Seeking",id:"seeking",level:3},{value:"Pitch and Tempo",id:"pitch-and-tempo",level:2},{value:"Pitch Shifting",id:"pitch-shifting",level:3},{value:"Tempo Control",id:"tempo-control",level:3},{value:"Combine Both",id:"combine-both",level:3},{value:"Volume and Fading",id:"volume-and-fading",level:2},{value:"Set Volume",id:"set-volume",level:3},{value:"Fade In/Out",id:"fade-inout",level:3},{value:"Smooth Volume Transitions",id:"smooth-volume-transitions",level:3},{value:"Looping",id:"looping",level:2},{value:"Fixed Loop Count",id:"fixed-loop-count",level:3},{value:"Infinite Loop",id:"infinite-loop",level:3},{value:"Observing State",id:"observing-state",level:2},{value:"StateFlow (Reactive)",id:"stateflow-reactive",level:3},{value:"Callbacks (Event-based)",id:"callbacks-event-based",level:3},{value:"Listener Interface",id:"listener-interface",level:3},{value:"Processing Tap",id:"processing-tap",level:2},{value:"Integration with Recording",id:"integration-with-recording",level:2},{value:"Platform Considerations",id:"platform-considerations",level:2},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Audio Formats",id:"audio-formats",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Music Player",id:"music-player",level:3},{value:"Karaoke Player",id:"karaoke-player",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"playing-audio",children:"Playing Audio"})}),"\n",(0,i.jsx)(n.p,{children:"A complete guide to audio playback with SonixPlayer."}),"\n",(0,i.jsx)(n.h2,{id:"what-youll-learn",children:"What You'll Learn"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Load and play audio files"}),"\n",(0,i.jsx)(n.li,{children:"Control pitch, tempo, and volume"}),"\n",(0,i.jsx)(n.li,{children:"Handle looping and seeking"}),"\n",(0,i.jsx)(n.li,{children:"React to playback events"}),"\n",(0,i.jsx)(n.li,{children:"Use processing taps for real-time effects"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"VoxaTrace installed"}),"\n",(0,i.jsx)(n.li,{children:"Audio file accessible (in app bundle or filesystem)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(n.h3,{id:"kotlin",children:"Kotlin"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'val player = SonixPlayer.create("path/to/song.mp3")\r\nplayer.play()\r\n\r\n// Later...\r\nplayer.pause()\r\nplayer.release()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"swift",children:"Swift"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:'let player = try await SonixPlayer.create(source: "path/to/song.mp3")\r\nplayer.play()\r\n\r\n// Later...\r\nplayer.pause()\r\nplayer.release()\n'})}),"\n",(0,i.jsx)(n.h2,{id:"loading-audio",children:"Loading Audio"}),"\n",(0,i.jsx)(n.h3,{id:"from-file-path",children:"From File Path"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'// Absolute path\r\nval player = SonixPlayer.create("/storage/emulated/0/Music/song.mp3")\r\n\r\n// Relative to app data directory\r\nval player = SonixPlayer.create("${context.filesDir}/song.mp3")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"from-assets-android",children:"From Assets (Android)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'// Copy asset to cache first, then load\r\nval assetPath = copyAssetToCache("songs/song.mp3")\r\nval player = SonixPlayer.create(assetPath)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"from-bundle-ios",children:"From Bundle (iOS)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:'if let url = Bundle.main.url(forResource: "song", withExtension: "mp3") {\r\n    let player = try await SonixPlayer.create(source: url.path)\r\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"from-raw-pcm-data",children:"From Raw PCM Data"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"val pcmData: ByteArray = ...\r\nval player = SonixPlayer.createFromPcm(\r\n    data = pcmData,\r\n    sampleRate = 44100,\r\n    channels = 1\r\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"playback-controls",children:"Playback Controls"}),"\n",(0,i.jsx)(n.h3,{id:"basic-controls",children:"Basic Controls"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"player.play()    // Start or resume\r\nplayer.pause()   // Pause playback\r\nplayer.stop()    // Stop and reset to beginning\n"})}),"\n",(0,i.jsx)(n.h3,{id:"seeking",children:"Seeking"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"// Seek to 30 seconds\r\nplayer.seek(30_000)  // milliseconds\r\n\r\n// Get current position\r\nplayer.currentTime.collect { timeMs ->\r\n    updateSeekBar(timeMs)\r\n}\r\n\r\n// Get total duration\r\nval totalMs = player.duration\n"})}),"\n",(0,i.jsx)(n.h2,{id:"pitch-and-tempo",children:"Pitch and Tempo"}),"\n",(0,i.jsx)(n.h3,{id:"pitch-shifting",children:"Pitch Shifting"}),"\n",(0,i.jsx)(n.p,{children:"Change the key without affecting speed:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"player.pitch = -2f   // 2 semitones down (lower key)\r\nplayer.pitch = 0f    // Original key\r\nplayer.pitch = 3f    // 3 semitones up (higher key)\n"})}),"\n",(0,i.jsx)(n.p,{children:"Range: -12 to +12 semitones (one octave each direction)."}),"\n",(0,i.jsx)(n.h3,{id:"tempo-control",children:"Tempo Control"}),"\n",(0,i.jsx)(n.p,{children:"Change the speed without affecting pitch:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"player.tempo = 0.5f   // Half speed (slow practice)\r\nplayer.tempo = 1.0f   // Normal speed\r\nplayer.tempo = 1.25f  // 25% faster\r\nplayer.tempo = 2.0f   // Double speed\n"})}),"\n",(0,i.jsx)(n.p,{children:"Range: 0.25x to 4.0x."}),"\n",(0,i.jsx)(n.h3,{id:"combine-both",children:"Combine Both"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"// Transpose to user's key AND slow down for practice\r\nplayer.pitch = userKeyOffset\r\nplayer.tempo = 0.75f\n"})}),"\n",(0,i.jsx)(n.h2,{id:"volume-and-fading",children:"Volume and Fading"}),"\n",(0,i.jsx)(n.h3,{id:"set-volume",children:"Set Volume"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"player.volume = 0.5f  // 50% volume\r\nplayer.volume = 1.0f  // Full volume\r\nplayer.volume = 0.0f  // Muted\n"})}),"\n",(0,i.jsx)(n.h3,{id:"fade-inout",children:"Fade In/Out"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"// Start silent, then fade in\r\nplayer.volume = 0f\r\nplayer.play()\r\nplayer.fadeIn(targetVolume = 1f, durationMs = 500)\r\n\r\n// Before stopping, fade out\r\nplayer.fadeOut(durationMs = 500)\r\nplayer.pause()\n"})}),"\n",(0,i.jsx)(n.h3,{id:"smooth-volume-transitions",children:"Smooth Volume Transitions"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"// Smoothly transition with easing\r\nplayer.setVolumeSmooth(\r\n    targetVolume = 0.5f,\r\n    durationMs = 300,\r\n    easing = VolumeEasing.EaseInOut\r\n)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"looping",children:"Looping"}),"\n",(0,i.jsx)(n.h3,{id:"fixed-loop-count",children:"Fixed Loop Count"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'val config = SonixPlayerConfig.Builder()\r\n    .loopCount(3)  // Play 3 times total\r\n    .onLoopComplete { loopIndex, total ->\r\n        println("Completed loop ${loopIndex + 1} of $total")\r\n    }\r\n    .build()\r\n\r\nval player = SonixPlayer.create("song.mp3", config)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"infinite-loop",children:"Infinite Loop"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'// Option 1: Preset\r\nval player = SonixPlayer.create("song.mp3", SonixPlayerConfig.LOOPING)\r\n\r\n// Option 2: Builder\r\nval config = SonixPlayerConfig.Builder()\r\n    .loopForever()\r\n    .build()\r\n\r\n// Option 3: Runtime\r\nplayer.loopCount = -1  // -1 means infinite\n'})}),"\n",(0,i.jsx)(n.h2,{id:"observing-state",children:"Observing State"}),"\n",(0,i.jsx)(n.h3,{id:"stateflow-reactive",children:"StateFlow (Reactive)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"// Current time (for seek bar)\r\nplayer.currentTime.collect { timeMs ->\r\n    seekBar.progress = timeMs.toInt()\r\n    timeLabel.text = formatTime(timeMs)\r\n}\r\n\r\n// Playing state (for play/pause button)\r\nplayer.isPlaying.collect { playing ->\r\n    playButton.icon = if (playing) pauseIcon else playIcon\r\n}\r\n\r\n// Errors\r\nplayer.error.collect { error ->\r\n    error?.let { showError(it.message) }\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"callbacks-event-based",children:"Callbacks (Event-based)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'val config = SonixPlayerConfig.Builder()\r\n    .onComplete { println("Playback finished") }\r\n    .onLoopComplete { loop, total -> println("Loop $loop/$total") }\r\n    .onPlaybackStateChanged { playing -> updateUI(playing) }\r\n    .onError { message -> showError(message) }\r\n    .build()\n'})}),"\n",(0,i.jsx)(n.h3,{id:"listener-interface",children:"Listener Interface"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'player.setPlaybackListener(object : SonixPlayer.PlaybackListener {\r\n    override fun onPlaybackCompleted() {\r\n        println("Done!")\r\n    }\r\n\r\n    override fun onLoopCompleted(loopIndex: Int, totalLoops: Int) {\r\n        println("Loop $loopIndex of $totalLoops")\r\n    }\r\n\r\n    override fun onPlaybackStateChanged(isPlaying: Boolean) {\r\n        updatePlayButton(isPlaying)\r\n    }\r\n\r\n    override fun onError(message: String) {\r\n        showError(message)\r\n    }\r\n})\n'})}),"\n",(0,i.jsx)(n.h2,{id:"processing-tap",children:"Processing Tap"}),"\n",(0,i.jsx)(n.p,{children:"Access audio buffers during playback for real-time processing:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"// Apply effects during playback\r\nval effects = CalibraEffects.create(EffectsPreset.VOCAL_CHAIN)\r\n\r\nplayer.setProcessingTap { buffer ->\r\n    effects.process(buffer)  // Modifies buffer in-place\r\n}\r\n\r\nplayer.play()\r\n\r\n// Remove tap when done\r\nplayer.setProcessingTap(null)\r\neffects.release()\n"})}),"\n",(0,i.jsx)(n.p,{children:"Use cases:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Apply reverb/compression to backing tracks"}),"\n",(0,i.jsx)(n.li,{children:"Visualize audio waveform"}),"\n",(0,i.jsx)(n.li,{children:"Extract features for analysis"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"integration-with-recording",children:"Integration with Recording"}),"\n",(0,i.jsx)(n.p,{children:"Sync recording with playback for karaoke:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:'val player = SonixPlayer.create("backing-track.mp3")\r\nval recorder = SonixRecorder.create(\r\n    "recording.m4a",\r\n    SonixRecorderConfig.Builder()\r\n        .playbackSyncProvider(player.asPlaybackInfoProvider)\r\n        .build()\r\n)\r\n\r\n// Start synchronized\r\nplayer.play()\r\nrecorder.start()\r\n\r\n// Recording timestamps align with playback position\n'})}),"\n",(0,i.jsx)(n.h2,{id:"platform-considerations",children:"Platform Considerations"}),"\n",(0,i.jsx)(n.h3,{id:"ios",children:"iOS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-swift",children:"// Audio session is automatically configured\r\n// Supports: M4A, MP3, WAV, AAC, and other system formats\n"})}),"\n",(0,i.jsx)(n.h3,{id:"android",children:"Android"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"// ExoPlayer is used internally\r\n// Supports: M4A, MP3, WAV, OGG, FLAC, and other ExoPlayer formats\n"})}),"\n",(0,i.jsx)(n.h3,{id:"audio-formats",children:"Audio Formats"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Format"}),(0,i.jsx)(n.th,{children:"iOS"}),(0,i.jsx)(n.th,{children:"Android"}),(0,i.jsx)(n.th,{children:"Notes"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"M4A/AAC"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Recommended for compression"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"MP3"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Universal compatibility"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"WAV"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Uncompressed, large files"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"OGG"}),(0,i.jsx)(n.td,{children:"No"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Android only"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"FLAC"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Yes"}),(0,i.jsx)(n.td,{children:"Lossless compression"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"music-player",children:"Music Player"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"class MusicPlayerViewModel {\r\n    private var player: SonixPlayer? = null\r\n\r\n    suspend fun load(path: String) {\r\n        player?.release()\r\n        player = SonixPlayer.create(path)\r\n    }\r\n\r\n    fun playPause() {\r\n        val p = player ?: return\r\n        if (p.isPlaying.value) p.pause() else p.play()\r\n    }\r\n\r\n    fun seek(positionMs: Long) {\r\n        player?.seek(positionMs)\r\n    }\r\n\r\n    fun cleanup() {\r\n        player?.release()\r\n        player = null\r\n    }\r\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"karaoke-player",children:"Karaoke Player"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-kotlin",children:"class KaraokePlayer(\r\n    private val backingTrack: String,\r\n    private val vocalGuide: String\r\n) {\r\n    private var backing: SonixPlayer? = null\r\n    private var guide: SonixPlayer? = null\r\n\r\n    suspend fun prepare() {\r\n        backing = SonixPlayer.create(backingTrack)\r\n        guide = SonixPlayer.create(vocalGuide)\r\n    }\r\n\r\n    fun play(withGuide: Boolean) {\r\n        backing?.play()\r\n        if (withGuide) {\r\n            guide?.volume = 0.3f\r\n            guide?.play()\r\n        }\r\n    }\r\n\r\n    fun setKey(semitones: Float) {\r\n        backing?.pitch = semitones\r\n        guide?.pitch = semitones\r\n    }\r\n\r\n    fun setTempo(factor: Float) {\r\n        backing?.tempo = factor\r\n        guide?.tempo = factor\r\n    }\r\n\r\n    fun toggleGuide(enabled: Boolean) {\r\n        guide?.volume = if (enabled) 0.3f else 0f\r\n    }\r\n\r\n    fun release() {\r\n        backing?.release()\r\n        guide?.release()\r\n    }\r\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"./recording-audio",children:"Recording Audio Guide"})," - Capture audio"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"../cookbook/karaoke-app",children:"Karaoke App Recipe"})," - Complete example"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453(e,n,r){r.d(n,{R:()=>o,x:()=>s});var l=r(6540);const i={},a=l.createContext(i);function o(e){const n=l.useContext(a);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),l.createElement(a.Provider,{value:n},e.children)}}}]);