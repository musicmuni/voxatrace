"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[6011],{5207(e,r,i){i.r(r),i.d(r,{assets:()=>l,contentTitle:()=>s,default:()=>x,frontMatter:()=>c,metadata:()=>d,toc:()=>h});const d=JSON.parse('{"id":"calibra/pitch","title":"CalibraPitch","description":"Real-time pitch detection and batch pitch extraction for singing and speech analysis. Detects the fundamental frequency (F0) of audio with two algorithm backends.","source":"@site/docs/calibra/pitch.md","sourceDirName":"calibra","slug":"/calibra/pitch","permalink":"/voxatrace/calibra/pitch","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Calibra Overview","permalink":"/voxatrace/calibra/overview"},"next":{"title":"CalibraVAD","permalink":"/voxatrace/calibra/vad"}}');var n=i(4848),t=i(8453);const c={sidebar_position:2},s="CalibraPitch",l={},h=[{value:"Quick Start",id:"quick-start",level:2},{value:"Kotlin",id:"kotlin",level:3},{value:"Swift",id:"swift",level:3},{value:"When to Use",id:"when-to-use",level:2},{value:"Detector Configuration",id:"detector-configuration",level:2},{value:"Presets",id:"presets",level:3},{value:"Builder",id:"builder",level:3},{value:"Kotlin",id:"kotlin-1",level:4},{value:"Swift",id:"swift-1",level:4},{value:"Config Properties",id:"config-properties",level:3},{value:"Builder Methods",id:"builder-methods",level:3},{value:"Algorithms",id:"algorithms",level:2},{value:"Voice Types",id:"voice-types",level:2},{value:"Quiet Handling",id:"quiet-handling",level:2},{value:"Detection Strictness",id:"detection-strictness",level:2},{value:"PitchPoint",id:"pitchpoint",level:2},{value:"Real-time Detection",id:"real-time-detection",level:2},{value:"Detector Methods",id:"detector-methods",level:3},{value:"Detector Properties",id:"detector-properties",level:3},{value:"Observing Live Pitch Contour",id:"observing-live-pitch-contour",level:3},{value:"Kotlin (StateFlow)",id:"kotlin-stateflow",level:4},{value:"Swift (Observer)",id:"swift-observer",level:4},{value:"Batch Extraction",id:"batch-extraction",level:2},{value:"Contour Extractor Presets",id:"contour-extractor-presets",level:3},{value:"Kotlin",id:"kotlin-2",level:3},{value:"Swift",id:"swift-2",level:3},{value:"Contour Extractor Builder",id:"contour-extractor-builder",level:3},{value:"Kotlin",id:"kotlin-3",level:4},{value:"Swift",id:"swift-3",level:4},{value:"Contour Cleanup Presets",id:"contour-cleanup-presets",level:3},{value:"Post-Processing",id:"post-processing",level:2},{value:"Contour-Level Methods",id:"contour-level-methods",level:3},{value:"Array-Level Methods",id:"array-level-methods",level:3},{value:"PitchContour",id:"pitchcontour",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Pitch Detector ViewModel",id:"pitch-detector-viewmodel",level:3},{value:"Platform Notes",id:"platform-notes",level:2},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.header,{children:(0,n.jsx)(r.h1,{id:"calibrapitch",children:"CalibraPitch"})}),"\n",(0,n.jsx)(r.p,{children:"Real-time pitch detection and batch pitch extraction for singing and speech analysis. Detects the fundamental frequency (F0) of audio with two algorithm backends."}),"\n",(0,n.jsx)(r.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,n.jsx)(r.h3,{id:"kotlin",children:"Kotlin"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:'val detector = CalibraPitch.createDetector()\r\nval point = detector.detect(audioBuffer, sampleRate = 16000)\r\nprintln("Pitch: ${point.pitch} Hz, Confidence: ${point.confidence}")\r\ndetector.close()\n'})}),"\n",(0,n.jsx)(r.h3,{id:"swift",children:"Swift"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-swift",children:'let detector = CalibraPitch.createDetector()\r\nlet point = detector.detect(samples: audioBuffer, sampleRate: 16000)\r\nprint("Pitch: \\(point.pitch) Hz, Confidence: \\(point.confidence)")\r\ndetector.close()\n'})}),"\n",(0,n.jsx)(r.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Use Case"}),(0,n.jsx)(r.th,{children:"API"}),(0,n.jsx)(r.th,{children:"Example"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Live tuner display"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"createDetector()"})}),(0,n.jsx)(r.td,{children:"Show pitch meter in real-time"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Karaoke scoring"}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"createDetector()"})," + ",(0,n.jsx)(r.code,{children:"CalibraLiveEval"})]}),(0,n.jsx)(r.td,{children:"Score singing while playing"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Analyze recorded audio"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"createContourExtractor()"})}),(0,n.jsx)(r.td,{children:"Extract pitch from audio files"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Post-process contours"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"PostProcess"})}),(0,n.jsx)(r.td,{children:"Clean up octave errors, smooth noise"})]})]})]}),"\n",(0,n.jsx)(r.h2,{id:"detector-configuration",children:"Detector Configuration"}),"\n",(0,n.jsx)(r.h3,{id:"presets",children:"Presets"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Preset"}),(0,n.jsx)(r.th,{children:"Kotlin"}),(0,n.jsx)(r.th,{children:"Swift"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Balanced"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"PitchDetectorConfig.BALANCED"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".balanced"})}),(0,n.jsx)(r.td,{children:"Default for most use cases"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Precise"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"PitchDetectorConfig.PRECISE"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".precise"})}),(0,n.jsx)(r.td,{children:"Larger buffer, stricter thresholds"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Relaxed"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"PitchDetectorConfig.RELAXED"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".relaxed"})}),(0,n.jsx)(r.td,{children:"More forgiving, higher recall"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"builder",children:"Builder"}),"\n",(0,n.jsx)(r.h4,{id:"kotlin-1",children:"Kotlin"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:"val config = PitchDetectorConfig.Builder()\r\n    .algorithm(PitchAlgorithm.SWIFT_F0)\r\n    .voiceType(VoiceType.carnaticMale)\r\n    .quietHandling(QuietHandling.SENSITIVE)\r\n    .enableProcessing()\r\n    .build()\r\n\r\nval detector = CalibraPitch.createDetector(config, modelProvider = { ModelLoader.loadSwiftF0() })\n"})}),"\n",(0,n.jsx)(r.h4,{id:"swift-1",children:"Swift"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-swift",children:"let config = PitchDetectorConfig.Builder()\r\n    .algorithm(.swiftF0)\r\n    .voiceType(.carnaticMale)\r\n    .quietHandling(.sensitive)\r\n    .enableProcessing()\r\n    .build()\r\n\r\nlet detector = CalibraPitch.createDetector(config: config, modelProvider: { ModelLoader.shared.loadSwiftF0() })\n"})}),"\n",(0,n.jsx)(r.h3,{id:"config-properties",children:"Config Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Default"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"algorithm"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"PitchAlgorithm"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"YIN"})}),(0,n.jsxs)(r.td,{children:["Detection algorithm (",(0,n.jsx)(r.code,{children:"YIN"})," or ",(0,n.jsx)(r.code,{children:"SWIFT_F0"}),")"]})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"bufferSize"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Int"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"2048"})}),(0,n.jsx)(r.td,{children:"Audio buffer size for analysis"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"hopSize"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Int"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"160"})}),(0,n.jsx)(r.td,{children:"Hop size between frames in samples"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"tolerance"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"0.15"})}),(0,n.jsx)(r.td,{children:"YIN algorithm tolerance (lower = more accurate)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"minFreq"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"80"})}),(0,n.jsx)(r.td,{children:"Minimum detectable frequency in Hz"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"maxFreq"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"1000"})}),(0,n.jsx)(r.td,{children:"Maximum detectable frequency in Hz"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"amplitudeGateDb"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"-40"})}),(0,n.jsx)(r.td,{children:"RMS threshold in dB for gating quiet frames"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"confidenceThreshold"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"0.75"})}),(0,n.jsx)(r.td,{children:"Minimum confidence to accept pitch (0.0-1.0)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"enableSmoothing"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Boolean"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"false"})}),(0,n.jsx)(r.td,{children:"Enable pitch smoothing filter"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"enableOctaveCorrection"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Boolean"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"false"})}),(0,n.jsx)(r.td,{children:"Enable octave error correction"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"builder-methods",children:"Builder Methods"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Method"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"preset(config)"})}),(0,n.jsx)(r.td,{children:"Start from a preset configuration"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"algorithm(algo)"})}),(0,n.jsx)(r.td,{children:"Set pitch detection algorithm"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"voiceType(type)"})}),(0,n.jsx)(r.td,{children:"Set frequency range for a voice type"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"quietHandling(handling)"})}),(0,n.jsx)(r.td,{children:"Set amplitude gate threshold"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"strictness(strictness)"})}),(0,n.jsx)(r.td,{children:"Set confidence threshold"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"enableProcessing()"})}),(0,n.jsx)(r.td,{children:"Enable smoothing + octave correction"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"bufferSize(size)"})}),(0,n.jsx)(r.td,{children:"Set buffer size for analysis"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"hopSize(samples)"})}),(0,n.jsx)(r.td,{children:"Set hop size between frames"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"tolerance(value)"})}),(0,n.jsx)(r.td,{children:"Set YIN algorithm tolerance"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"swiftF0BatchSize(samples)"})}),(0,n.jsx)(r.td,{children:"Set SwiftF0 batch size"})]})]})]}),"\n",(0,n.jsx)(r.h2,{id:"algorithms",children:"Algorithms"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Algorithm"}),(0,n.jsx)(r.th,{children:"Best For"}),(0,n.jsx)(r.th,{children:"Latency"}),(0,n.jsx)(r.th,{children:"Dependencies"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"YIN"})}),(0,n.jsx)(r.td,{children:"Real-time, low power, edge cases"}),(0,n.jsx)(r.td,{children:"~50ms"}),(0,n.jsx)(r.td,{children:"None (pure DSP)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"SWIFT_F0"})}),(0,n.jsx)(r.td,{children:"Vocals, high accuracy"}),(0,n.jsx)(r.td,{children:"~16ms per frame"}),(0,n.jsx)(r.td,{children:"ONNX Runtime"})]})]})]}),"\n",(0,n.jsx)(r.p,{children:"SwiftF0 achieves 91.80% harmonic mean accuracy at 10dB SNR with only 95k parameters. It requires a model provider:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:"// Register globally at app startup\r\nAIModelRegistry.registerSwiftF0 { ModelLoader.loadSwiftF0() }\r\n\r\n// Or pass per-instance\r\nval detector = CalibraPitch.createDetector(config, modelProvider = { ModelLoader.loadSwiftF0() })\n"})}),"\n",(0,n.jsx)(r.h2,{id:"voice-types",children:"Voice Types"}),"\n",(0,n.jsx)(r.p,{children:"Optimize frequency range for different singing styles:"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Voice Type"}),(0,n.jsx)(r.th,{children:"Kotlin"}),(0,n.jsx)(r.th,{children:"Swift"}),(0,n.jsx)(r.th,{children:"Range (Hz)"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Auto"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.auto"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".auto"})}),(0,n.jsx)(r.td,{children:"80\u20131000"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Western Soprano"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.westernSoprano"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".westernSoprano"})}),(0,n.jsx)(r.td,{children:"250\u20131000"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Western Alto"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.westernAlto"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".westernAlto"})}),(0,n.jsx)(r.td,{children:"180\u2013700"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Western Tenor"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.westernTenor"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".westernTenor"})}),(0,n.jsx)(r.td,{children:"130\u2013500"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Western Bass"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.westernBass"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".westernBass"})}),(0,n.jsx)(r.td,{children:"80\u2013350"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Western Child"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.westernChild"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".westernChild"})}),(0,n.jsx)(r.td,{children:"200\u20131200"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Carnatic Male"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.carnaticMale"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".carnaticMale"})}),(0,n.jsx)(r.td,{children:"90\u2013450"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Carnatic Female"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.carnaticFemale"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".carnaticFemale"})}),(0,n.jsx)(r.td,{children:"140\u2013900"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Carnatic Child"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.carnaticChild"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".carnaticChild"})}),(0,n.jsx)(r.td,{children:"200\u20131000"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Hindustani Male"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.hindustaniMale"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".hindustaniMale"})}),(0,n.jsx)(r.td,{children:"90\u2013450"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Hindustani Female"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.hindustaniFemale"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".hindustaniFemale"})}),(0,n.jsx)(r.td,{children:"180\u2013900"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Hindustani Child"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.hindustaniChild"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".hindustaniChild"})}),(0,n.jsx)(r.td,{children:"200\u20131000"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Pop Male"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.popMale"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".popMale"})}),(0,n.jsx)(r.td,{children:"100\u2013500"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Pop Female"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.popFemale"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".popFemale"})}),(0,n.jsx)(r.td,{children:"180\u2013800"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Pop Child"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.popChild"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".popChild"})}),(0,n.jsx)(r.td,{children:"200\u20131000"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Indian Film Male"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.indianFilmMale"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".indianFilmMale"})}),(0,n.jsx)(r.td,{children:"100\u2013500"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Indian Film Female"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.indianFilmFemale"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".indianFilmFemale"})}),(0,n.jsx)(r.td,{children:"180\u2013900"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Indian Film Child"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"VoiceType.indianFilmChild"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".indianFilmChild"})}),(0,n.jsx)(r.td,{children:"200\u20131000"})]})]})]}),"\n",(0,n.jsx)(r.h2,{id:"quiet-handling",children:"Quiet Handling"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Level"}),(0,n.jsx)(r.th,{children:"Kotlin"}),(0,n.jsx)(r.th,{children:"Swift"}),(0,n.jsx)(r.th,{children:"Gate (dB)"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Sensitive"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"QuietHandling.SENSITIVE"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".sensitive"})}),(0,n.jsx)(r.td,{children:"-50"}),(0,n.jsx)(r.td,{children:"Soft singing, quiet room"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Normal"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"QuietHandling.NORMAL"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".normal"})}),(0,n.jsx)(r.td,{children:"-40"}),(0,n.jsx)(r.td,{children:"Typical environment (default)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Noisy"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"QuietHandling.NOISY"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".noisy"})}),(0,n.jsx)(r.td,{children:"-30"}),(0,n.jsx)(r.td,{children:"Loud environment"})]})]})]}),"\n",(0,n.jsx)(r.h2,{id:"detection-strictness",children:"Detection Strictness"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Level"}),(0,n.jsx)(r.th,{children:"Kotlin"}),(0,n.jsx)(r.th,{children:"Swift"}),(0,n.jsx)(r.th,{children:"Threshold"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Strict"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"DetectionStrictness.STRICT"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".strict"})}),(0,n.jsx)(r.td,{children:"0.85"}),(0,n.jsx)(r.td,{children:"Fewer false positives"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Balanced"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"DetectionStrictness.BALANCED"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".balanced"})}),(0,n.jsx)(r.td,{children:"0.75"}),(0,n.jsx)(r.td,{children:"Default setting"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Lenient"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"DetectionStrictness.LENIENT"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".lenient"})}),(0,n.jsx)(r.td,{children:"0.65"}),(0,n.jsx)(r.td,{children:"Catches more notes"})]})]})]}),"\n",(0,n.jsx)(r.h2,{id:"pitchpoint",children:"PitchPoint"}),"\n",(0,n.jsxs)(r.p,{children:["Each detection returns a ",(0,n.jsx)(r.code,{children:"PitchPoint"})," with:"]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"pitch"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:"Frequency in Hz (-1 if unvoiced)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"confidence"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:"Detection confidence (0.0\u20131.0)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"timeSeconds"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:"Timestamp in seconds"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"isSinging"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Boolean"})}),(0,n.jsx)(r.td,{children:"Whether pitch was detected (pitch > 0)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"midiNote"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Int"})}),(0,n.jsx)(r.td,{children:"MIDI note number (69 = A4)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"note"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"String?"})}),(0,n.jsx)(r.td,{children:'Note name with octave (e.g., "A4", "C#5")'})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"centsOff"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Int"})}),(0,n.jsx)(r.td,{children:"Cents deviation from nearest note (-50 to +50)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"tuning"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Tuning"})}),(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"SILENT"}),", ",(0,n.jsx)(r.code,{children:"FLAT"}),", ",(0,n.jsx)(r.code,{children:"IN_TUNE"}),", or ",(0,n.jsx)(r.code,{children:"SHARP"})]})]})]})]}),"\n",(0,n.jsx)(r.h2,{id:"real-time-detection",children:"Real-time Detection"}),"\n",(0,n.jsx)(r.h3,{id:"detector-methods",children:"Detector Methods"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Method"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"detect(samples, sampleRate)"})}),(0,n.jsx)(r.td,{children:"Detect pitch from audio buffer. Resamples to 16kHz internally."})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"getAmplitude(samples, sampleRate)"})}),(0,n.jsx)(r.td,{children:"Get RMS amplitude of audio buffer"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"reset()"})}),(0,n.jsx)(r.td,{children:"Reset state and internal buffer"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsxs)(r.td,{children:[(0,n.jsx)(r.code,{children:"release()"})," / ",(0,n.jsx)(r.code,{children:"close()"})]}),(0,n.jsx)(r.td,{children:"Release all resources"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"duplicate()"})}),(0,n.jsx)(r.td,{children:"Create independent copy with same config"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"setContourMaxDuration(seconds)"})}),(0,n.jsx)(r.td,{children:"Set max duration for live pitch contour"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"clearPitchContour()"})}),(0,n.jsx)(r.td,{children:"Clear accumulated pitch contour"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"detector-properties",children:"Detector Properties"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"config"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"PitchDetectorConfig"})}),(0,n.jsx)(r.td,{children:"Configuration used to create this detector"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"latencyMs"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:"Detection latency in milliseconds"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"hasProcessing"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Boolean"})}),(0,n.jsx)(r.td,{children:"Whether post-processing is available"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"processingEnabled"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Boolean"})}),(0,n.jsx)(r.td,{children:"Enable/disable post-processing at runtime"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"livePitchContour"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"StateFlow<PitchContour>"})}),(0,n.jsx)(r.td,{children:"Accumulated pitch contour for visualization"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"observing-live-pitch-contour",children:"Observing Live Pitch Contour"}),"\n",(0,n.jsx)(r.h4,{id:"kotlin-stateflow",children:"Kotlin (StateFlow)"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:"detector.livePitchContour.collect { contour ->\r\n    // Update scrolling pitch display\r\n    updatePitchVisualization(contour)\r\n}\n"})}),"\n",(0,n.jsx)(r.h4,{id:"swift-observer",children:"Swift (Observer)"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-swift",children:"let task = detector.observeLivePitchContour { contour in\r\n    self.pitchContour = contour\r\n}\r\n\r\n// Cancel when done\r\ntask.cancel()\n"})}),"\n",(0,n.jsx)(r.h2,{id:"batch-extraction",children:"Batch Extraction"}),"\n",(0,n.jsx)(r.p,{children:"Extract a complete pitch contour from recorded audio."}),"\n",(0,n.jsx)(r.h3,{id:"contour-extractor-presets",children:"Contour Extractor Presets"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Preset"}),(0,n.jsx)(r.th,{children:"Kotlin"}),(0,n.jsx)(r.th,{children:"Swift"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Default"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"ContourExtractorConfig.DEFAULT"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".default"})}),(0,n.jsx)(r.td,{children:"Balanced with scoring cleanup"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Scoring"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"ContourExtractorConfig.SCORING"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".scoring"})}),(0,n.jsx)(r.td,{children:"Optimized for melody evaluation"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Display"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"ContourExtractorConfig.DISPLAY"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".display"})}),(0,n.jsx)(r.td,{children:"Optimized for visualization"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Raw"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"ContourExtractorConfig.RAW"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".raw"})}),(0,n.jsx)(r.td,{children:"No post-processing"})]})]})]}),"\n",(0,n.jsx)(r.h3,{id:"kotlin-2",children:"Kotlin"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:'val extractor = CalibraPitch.createContourExtractor(\r\n    ContourExtractorConfig.SCORING,\r\n    modelProvider = { ModelLoader.loadSwiftF0() }\r\n)\r\nval contour = extractor.extract(audioSamples, sampleRate = 44100)\r\nprintln("Duration: ${contour.duration}s, Voiced: ${(contour.voicedRatio * 100).toInt()}%")\r\nextractor.release()\n'})}),"\n",(0,n.jsx)(r.h3,{id:"swift-2",children:"Swift"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-swift",children:'let extractor = CalibraPitch.createContourExtractor(\r\n    config: .scoring,\r\n    modelProvider: { ModelLoader.shared.loadSwiftF0() }\r\n)\r\nlet contour = extractor.extract(audio: audioSamples, sampleRate: 44100)\r\nprint("Duration: \\(contour.duration)s, Voiced: \\(Int(contour.voicedRatio * 100))%")\r\nextractor.release()\n'})}),"\n",(0,n.jsx)(r.h3,{id:"contour-extractor-builder",children:"Contour Extractor Builder"}),"\n",(0,n.jsx)(r.h4,{id:"kotlin-3",children:"Kotlin"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:"val config = ContourExtractorConfig.Builder()\r\n    .pitchPreset(PitchPreset.PRECISE)\r\n    .algorithm(PitchAlgorithm.SWIFT_F0)\r\n    .sampleRate(16000)\r\n    .hopMs(10)\r\n    .cleanup(ContourCleanup.SCORING)\r\n    .voiceType(VoiceType.carnaticMale)\r\n    .build()\r\n\r\nval extractor = CalibraPitch.createContourExtractor(config, modelProvider = { ModelLoader.loadSwiftF0() })\n"})}),"\n",(0,n.jsx)(r.h4,{id:"swift-3",children:"Swift"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-swift",children:"let config = ContourExtractorConfig.Builder()\r\n    .pitchPreset(.precise)\r\n    .algorithm(.swiftF0)\r\n    .sampleRate(16000)\r\n    .hopMs(10)\r\n    .cleanup(.scoring)\r\n    .voiceType(.carnaticMale)\r\n    .build()\r\n\r\nlet extractor = CalibraPitch.createContourExtractor(config: config, modelProvider: { ModelLoader.shared.loadSwiftF0() })\n"})}),"\n",(0,n.jsx)(r.h3,{id:"contour-cleanup-presets",children:"Contour Cleanup Presets"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Preset"}),(0,n.jsx)(r.th,{children:"Kotlin"}),(0,n.jsx)(r.th,{children:"Swift"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Raw"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"ContourCleanup.RAW"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".raw"})}),(0,n.jsx)(r.td,{children:"No post-processing"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Scoring"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"ContourCleanup.SCORING"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".scoring"})}),(0,n.jsx)(r.td,{children:"Octave + boundary + blip removal"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:"Display"}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"ContourCleanup.DISPLAY"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:".display"})}),(0,n.jsx)(r.td,{children:"Scoring + smoothing for visualization"})]})]})]}),"\n",(0,n.jsx)(r.h2,{id:"post-processing",children:"Post-Processing"}),"\n",(0,n.jsxs)(r.p,{children:["Clean up pitch contours with ",(0,n.jsx)(r.code,{children:"CalibraPitch.PostProcess"}),"."]}),"\n",(0,n.jsx)(r.h3,{id:"contour-level-methods",children:"Contour-Level Methods"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:"// Apply a cleanup preset\r\nval cleaned = CalibraPitch.PostProcess.cleanup(contour, ContourCleanup.SCORING)\r\n\r\n// Individual operations\r\nval fixed = CalibraPitch.PostProcess.fixOctaveErrors(contour)\r\nval noBoundary = CalibraPitch.PostProcess.fixBoundaryOctaves(contour)\r\nval noBlips = CalibraPitch.PostProcess.removeBlips(contour, minDurationMs = 80f)\r\nval smoothed = CalibraPitch.PostProcess.smooth(contour)\n"})}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-swift",children:"let cleaned = CalibraPitch.PostProcess.cleanup(contour, options: .scoring)\r\n\r\nlet fixed = CalibraPitch.PostProcess.fixOctaveErrors(contour)\r\nlet noBoundary = CalibraPitch.PostProcess.fixBoundaryOctaves(contour)\r\nlet noBlips = CalibraPitch.PostProcess.removeBlips(contour, minDurationMs: 80)\r\nlet smoothed = CalibraPitch.PostProcess.smooth(contour)\n"})}),"\n",(0,n.jsx)(r.h3,{id:"array-level-methods",children:"Array-Level Methods"}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Method"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"process(pitchesHz)"})}),(0,n.jsx)(r.td,{children:"Full processing (smoothing + octave correction)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"smooth(pitchesHz, windowSize)"})}),(0,n.jsx)(r.td,{children:"Smoothing filter only"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"correctOctaveErrors(pitchesHz, thresholdCents, referencePitchHz)"})}),(0,n.jsx)(r.td,{children:"Fix octave jumps"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"medianFilter(pitchesHz, kernelSize)"})}),(0,n.jsx)(r.td,{children:"Median filter for spike removal"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"rejectOutliers(pitchesHz, hopMs, minDurationMs)"})}),(0,n.jsx)(r.td,{children:"Remove short pitch runs (blips)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"correctBoundaryOctaves(pitchesHz, hopMs, boundaryWindowMs)"})}),(0,n.jsx)(r.td,{children:"Fix octave errors at phrase edges"})]})]})]}),"\n",(0,n.jsx)(r.h2,{id:"pitchcontour",children:"PitchContour"}),"\n",(0,n.jsxs)(r.p,{children:["A sequence of ",(0,n.jsx)(r.code,{children:"PitchPoint"})," values over time."]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Property"}),(0,n.jsx)(r.th,{children:"Type"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"samples"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"List<PitchPoint>"})}),(0,n.jsx)(r.td,{children:"Pitch points in chronological order"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"sampleRate"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Int"})}),(0,n.jsx)(r.td,{children:"Original audio sample rate"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"duration"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:"Duration in seconds"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"voicedRatio"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Float"})}),(0,n.jsx)(r.td,{children:"Ratio of voiced to total samples (0.0\u20131.0)"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"size"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Int"})}),(0,n.jsx)(r.td,{children:"Number of samples"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"isEmpty"})}),(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"Boolean"})}),(0,n.jsx)(r.td,{children:"True if contour has no samples"})]})]})]}),"\n",(0,n.jsxs)(r.table,{children:[(0,n.jsx)(r.thead,{children:(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.th,{children:"Method"}),(0,n.jsx)(r.th,{children:"Description"})]})}),(0,n.jsxs)(r.tbody,{children:[(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"slice(startTime, endTime, relativeTimes)"})}),(0,n.jsx)(r.td,{children:"Extract a time range"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"fromArrays(times, pitches, sampleRate)"})}),(0,n.jsx)(r.td,{children:"Create from parallel arrays"})]}),(0,n.jsxs)(r.tr,{children:[(0,n.jsx)(r.td,{children:(0,n.jsx)(r.code,{children:"fromPoints(points, sampleRate)"})}),(0,n.jsx)(r.td,{children:"Create from a list of PitchPoints"})]})]})]}),"\n",(0,n.jsx)(r.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,n.jsx)(r.h3,{id:"pitch-detector-viewmodel",children:"Pitch Detector ViewModel"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-kotlin",children:"class PitchViewModel : ViewModel() {\r\n    private var detector: CalibraPitch.Detector? = null\r\n\r\n    val currentPitch = MutableStateFlow(PitchPoint.EMPTY)\r\n\r\n    fun startDetection() {\r\n        detector = CalibraPitch.createDetector(PitchDetectorConfig.BALANCED)\r\n\r\n        viewModelScope.launch {\r\n            recorder.audioBuffers.collect { buffer ->\r\n                val point = detector!!.detect(buffer.samples, buffer.sampleRate)\r\n                currentPitch.value = point\r\n            }\r\n        }\r\n    }\r\n\r\n    override fun onCleared() {\r\n        detector?.close()\r\n    }\r\n}\n"})}),"\n",(0,n.jsx)(r.h2,{id:"platform-notes",children:"Platform Notes"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"iOS"}),": Audio input is typically 48kHz; resampled internally to 16kHz. SwiftF0 requires ",(0,n.jsx)(r.code,{children:"ai-models"})," module with ONNX Runtime."]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.strong,{children:"Android"}),": Audio input is typically 44.1kHz or 16kHz depending on device. SwiftF0 uses ONNX Runtime for Android. YIN has no external dependencies."]}),"\n"]}),"\n",(0,n.jsx)(r.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"./vad",children:"CalibraVAD"})," \u2014 Detect when someone is singing vs. silence"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"./live-eval",children:"CalibraLiveEval"})," \u2014 Live singing evaluation with scoring"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"./melody-eval",children:"CalibraMelodyEval"})," \u2014 Evaluate singing accuracy against a reference"]}),"\n",(0,n.jsxs)(r.li,{children:[(0,n.jsx)(r.a,{href:"./utilities",children:"Utilities"})," \u2014 Shared model types (PitchPoint, PitchContour, VoiceType)"]}),"\n"]})]})}function x(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},8453(e,r,i){i.d(r,{R:()=>c,x:()=>s});var d=i(6540);const n={},t=d.createContext(n);function c(e){const r=d.useContext(t);return d.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function s(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:c(e.components),d.createElement(t.Provider,{value:r},e.children)}}}]);