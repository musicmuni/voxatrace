"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1948],{1713(e,n,t){t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"sonix/encoder","title":"SonixEncoder","description":"Encode raw PCM audio to compressed formats (M4A/AAC or MP3) for storage and sharing.","source":"@site/docs/sonix/encoder.md","sourceDirName":"sonix","slug":"/sonix/encoder","permalink":"/sonix/encoder","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"docsSidebar","previous":{"title":"SonixDecoder","permalink":"/sonix/decoder"},"next":{"title":"SonixResampler","permalink":"/sonix/resampler"}}');var d=t(4848),i=t(8453);const a={sidebar_position:7},o="SonixEncoder",s={},l=[{value:"Quick Start",id:"quick-start",level:2},{value:"Kotlin",id:"kotlin",level:3},{value:"Swift",id:"swift",level:3},{value:"Encoding Methods",id:"encoding-methods",level:2},{value:"From AudioRawData",id:"from-audiorawdata",level:3},{value:"From Float Samples",id:"from-float-samples",level:3},{value:"Kotlin",id:"kotlin-1",level:4},{value:"Swift",id:"swift-1",level:4},{value:"From PCM Bytes",id:"from-pcm-bytes",level:3},{value:"Kotlin",id:"kotlin-2",level:4},{value:"Swift",id:"swift-2",level:4},{value:"Method Summary",id:"method-summary",level:2},{value:"Format Availability",id:"format-availability",level:2},{value:"Supported Formats",id:"supported-formats",level:2},{value:"Bitrate Guide",id:"bitrate-guide",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Convert Audio Format",id:"convert-audio-format",level:3},{value:"Export Synthesized Audio",id:"export-synthesized-audio",level:3},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"sonixencoder",children:"SonixEncoder"})}),"\n",(0,d.jsx)(n.p,{children:"Encode raw PCM audio to compressed formats (M4A/AAC or MP3) for storage and sharing."}),"\n",(0,d.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,d.jsx)(n.h3,{id:"kotlin",children:"Kotlin"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-kotlin",children:'// Encode from AudioRawData (e.g., after decoding or synthesis)\r\nval rawData = SonixDecoder.decode("input.wav", targetSampleRate = null)\r\nif (rawData != null) {\r\n    val success = SonixEncoder.encode(\r\n        data = rawData,\r\n        outputPath = "/path/to/output.mp3",\r\n        format = "mp3"\r\n    )\r\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"swift",children:"Swift"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-swift",children:'if let rawData = SonixDecoder.decode(path: "input.wav", targetSampleRate: nil) {\r\n    let success = SonixEncoder.encode(\r\n        data: rawData,\r\n        outputPath: "/path/to/output.mp3",\r\n        format: "mp3"\r\n    )\r\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"encoding-methods",children:"Encoding Methods"}),"\n",(0,d.jsx)(n.h3,{id:"from-audiorawdata",children:"From AudioRawData"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-kotlin",children:'SonixEncoder.encode(\r\n    data = audioRawData,\r\n    outputPath = "/path/to/output.m4a",\r\n    format = "m4a",         // "m4a" (default) or "mp3"\r\n    bitrateKbps = 128       // default: 128\r\n)\n'})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-swift",children:'SonixEncoder.encode(\r\n    data: audioRawData,\r\n    outputPath: "/path/to/output.m4a",\r\n    format: "m4a",\r\n    bitrateKbps: 128\r\n)\n'})}),"\n",(0,d.jsx)(n.h3,{id:"from-float-samples",children:"From Float Samples"}),"\n",(0,d.jsx)(n.h4,{id:"kotlin-1",children:"Kotlin"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-kotlin",children:'SonixEncoder.encode(\r\n    samples = floatArray,      // [-1.0, 1.0] range\r\n    sampleRate = 44100,\r\n    channels = 1,\r\n    outputPath = "/path/to/output.m4a",\r\n    format = "m4a",\r\n    bitrateKbps = 128\r\n)\n'})}),"\n",(0,d.jsx)(n.h4,{id:"swift-1",children:"Swift"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-swift",children:'SonixEncoder.encode(\r\n    samples: floatArray,\r\n    sampleRate: 44100,\r\n    channels: 1,\r\n    outputPath: "/path/to/output.m4a",\r\n    format: "m4a",\r\n    bitrateKbps: 128\r\n)\n'})}),"\n",(0,d.jsx)(n.h3,{id:"from-pcm-bytes",children:"From PCM Bytes"}),"\n",(0,d.jsx)(n.h4,{id:"kotlin-2",children:"Kotlin"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-kotlin",children:'SonixEncoder.encode(\r\n    pcmData = byteArray,       // 16-bit signed, little-endian\r\n    sampleRate = 44100,\r\n    channels = 1,\r\n    outputPath = "/path/to/output.mp3",\r\n    format = "mp3",\r\n    bitrateKbps = 192\r\n)\n'})}),"\n",(0,d.jsx)(n.h4,{id:"swift-2",children:"Swift"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-swift",children:'SonixEncoder.encode(\r\n    pcmData: data,\r\n    sampleRate: 44100,\r\n    channels: 1,\r\n    outputPath: "/path/to/output.mp3",\r\n    format: "mp3",\r\n    bitrateKbps: 192\r\n)\n'})}),"\n",(0,d.jsx)(n.h2,{id:"method-summary",children:"Method Summary"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Method"}),(0,d.jsx)(n.th,{children:"Input Type"}),(0,d.jsx)(n.th,{children:"Parameters"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"encode"})}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"AudioRawData"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"data"}),", ",(0,d.jsx)(n.code,{children:"outputPath"}),", ",(0,d.jsx)(n.code,{children:"format"}),", ",(0,d.jsx)(n.code,{children:"bitrateKbps"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"encode"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"FloatArray"})," / ",(0,d.jsx)(n.code,{children:"[Float]"})]}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"samples"}),", ",(0,d.jsx)(n.code,{children:"sampleRate"}),", ",(0,d.jsx)(n.code,{children:"channels"}),", ",(0,d.jsx)(n.code,{children:"outputPath"}),", ",(0,d.jsx)(n.code,{children:"format"}),", ",(0,d.jsx)(n.code,{children:"bitrateKbps"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"encode"})}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"ByteArray"})," / ",(0,d.jsx)(n.code,{children:"Data"})]}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"pcmData"}),", ",(0,d.jsx)(n.code,{children:"sampleRate"}),", ",(0,d.jsx)(n.code,{children:"channels"}),", ",(0,d.jsx)(n.code,{children:"outputPath"}),", ",(0,d.jsx)(n.code,{children:"format"}),", ",(0,d.jsx)(n.code,{children:"bitrateKbps"})]})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:"isFormatAvailable"})}),(0,d.jsx)(n.td,{children:"\u2014"}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:"format: String"})," \u2192 ",(0,d.jsx)(n.code,{children:"Boolean"})]})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"format-availability",children:"Format Availability"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-kotlin",children:'if (SonixEncoder.isFormatAvailable("mp3")) {\r\n    // MP3 encoding is supported on this platform\r\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"supported-formats",children:"Supported Formats"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Format"}),(0,d.jsx)(n.th,{children:"String"}),(0,d.jsx)(n.th,{children:"Quality"}),(0,d.jsx)(n.th,{children:"Use Case"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"M4A/AAC"}),(0,d.jsxs)(n.td,{children:[(0,d.jsx)(n.code,{children:'"m4a"'})," or ",(0,d.jsx)(n.code,{children:'"aac"'})]}),(0,d.jsx)(n.td,{children:"Best"}),(0,d.jsx)(n.td,{children:"Default choice, native hardware encoding"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"MP3"}),(0,d.jsx)(n.td,{children:(0,d.jsx)(n.code,{children:'"mp3"'})}),(0,d.jsx)(n.td,{children:"Good"}),(0,d.jsx)(n.td,{children:"Universal compatibility"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"bitrate-guide",children:"Bitrate Guide"}),"\n",(0,d.jsxs)(n.table,{children:[(0,d.jsx)(n.thead,{children:(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.th,{children:"Bitrate"}),(0,d.jsx)(n.th,{children:"Quality"}),(0,d.jsx)(n.th,{children:"File Size"})]})}),(0,d.jsxs)(n.tbody,{children:[(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"64 kbps"}),(0,d.jsx)(n.td,{children:"Low (voice)"}),(0,d.jsx)(n.td,{children:"~0.5 MB/min"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"128 kbps"}),(0,d.jsx)(n.td,{children:"Standard"}),(0,d.jsx)(n.td,{children:"~1 MB/min"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"192 kbps"}),(0,d.jsx)(n.td,{children:"High"}),(0,d.jsx)(n.td,{children:"~1.5 MB/min"})]}),(0,d.jsxs)(n.tr,{children:[(0,d.jsx)(n.td,{children:"256 kbps"}),(0,d.jsx)(n.td,{children:"Very high"}),(0,d.jsx)(n.td,{children:"~2 MB/min"})]})]})]}),"\n",(0,d.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,d.jsx)(n.h3,{id:"convert-audio-format",children:"Convert Audio Format"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-kotlin",children:'// Decode MP3, re-encode as M4A\r\nval audioData = SonixDecoder.decode("input.mp3", targetSampleRate = null)\r\nif (audioData != null) {\r\n    SonixEncoder.encode(data = audioData, outputPath = "output.m4a")\r\n}\n'})}),"\n",(0,d.jsx)(n.h3,{id:"export-synthesized-audio",children:"Export Synthesized Audio"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-kotlin",children:'val synth = SonixMidiSynthesizer.create(soundFontPath = sfPath)\r\nsynth.synthesizeFromNotes(notes, outputPath = "output.wav")\r\n\r\n// Convert WAV to compressed MP3\r\nval wavData = SonixDecoder.decode("output.wav", targetSampleRate = null)\r\nif (wavData != null) {\r\n    SonixEncoder.encode(data = wavData, outputPath = "output.mp3", format = "mp3")\r\n}\n'})}),"\n",(0,d.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"./decoder",children:"SonixDecoder"})," \u2014 Decode audio files to raw PCM"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"./recorder",children:"SonixRecorder"})," \u2014 Record with automatic encoding"]}),"\n",(0,d.jsxs)(n.li,{children:[(0,d.jsx)(n.a,{href:"./resampler",children:"SonixResampler"})," \u2014 Resample before encoding"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(c,{...e})}):c(e)}},8453(e,n,t){t.d(n,{R:()=>a,x:()=>o});var r=t(6540);const d={},i=r.createContext(d);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);