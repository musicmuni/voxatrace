"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1534],{1616(e,r,n){n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"calibra/melody-eval","title":"CalibraMelodyEval","description":"Offline melody evaluation that compares a complete recorded performance against a reference melody for post-recording scoring and analysis.","source":"@site/docs/calibra/melody-eval.md","sourceDirName":"calibra","slug":"/calibra/melody-eval","permalink":"/voxatrace/calibra/melody-eval","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"docsSidebar","previous":{"title":"CalibraLiveEval","permalink":"/voxatrace/calibra/live-eval"},"next":{"title":"CalibraNoteEval","permalink":"/voxatrace/calibra/note-eval"}}');var s=n(4848),d=n(8453);const l={sidebar_position:6},i="CalibraMelodyEval",c={},a=[{value:"Quick Start",id:"quick-start",level:2},{value:"Kotlin",id:"kotlin",level:3},{value:"Swift",id:"swift",level:3},{value:"Evaluate Method",id:"evaluate-method",level:2},{value:"Kotlin",id:"kotlin-1",level:3},{value:"Swift",id:"swift-1",level:3},{value:"Parameters",id:"parameters",level:3},{value:"Sample Rate Requirement",id:"sample-rate-requirement",level:3},{value:"Return Value",id:"return-value",level:3},{value:"Creating LessonMaterial",id:"creating-lessonmaterial",level:2},{value:"From Audio Samples",id:"from-audio-samples",level:3},{value:"Kotlin",id:"kotlin-2",level:4},{value:"Swift",id:"swift-2",level:4},{value:"Parameters",id:"parameters-1",level:3},{value:"LessonMaterial Properties",id:"lessonmaterial-properties",level:3},{value:"From File Path",id:"from-file-path",level:3},{value:"Creating Segments",id:"creating-segments",level:2},{value:"Kotlin",id:"kotlin-3",level:3},{value:"Swift",id:"swift-3",level:3},{value:"Segment Properties",id:"segment-properties",level:3},{value:"Result Types",id:"result-types",level:2},{value:"SingingResult",id:"singingresult",level:3},{value:"SingingResult Methods",id:"singingresult-methods",level:4},{value:"Swift-Only Extensions",id:"swift-only-extensions",level:4},{value:"SingingResult Constants",id:"singingresult-constants",level:4},{value:"SegmentResult",id:"segmentresult",level:3},{value:"Swift Pitch Data Access",id:"swift-pitch-data-access",level:4},{value:"PerformanceLevel",id:"performancelevel",level:3},{value:"ResultAggregation",id:"resultaggregation",level:3},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Post-Recording Scoring (Android)",id:"post-recording-scoring-android",level:3},{value:"Pre-Computed Pitch Contour (Skip Extraction)",id:"pre-computed-pitch-contour-skip-extraction",level:3},{value:"Different Keys (Student vs Reference)",id:"different-keys-student-vs-reference",level:3},{value:"Segment Results with Feedback (iOS)",id:"segment-results-with-feedback-ios",level:3},{value:"Next Steps",id:"next-steps",level:2}];function o(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"calibramelodyeval",children:"CalibraMelodyEval"})}),"\n",(0,s.jsx)(r.p,{children:"Offline melody evaluation that compares a complete recorded performance against a reference melody for post-recording scoring and analysis."}),"\n",(0,s.jsx)(r.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,s.jsx)(r.h3,{id:"kotlin",children:"Kotlin"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kotlin",children:'val reference = LessonMaterial.fromAudio(\r\n    samples = referenceAudio,\r\n    sampleRate = 16000,\r\n    segments = listOf(\r\n        Segment(0, 0.0f, 3.5f, "First line"),\r\n        Segment(1, 3.5f, 7.0f, "Second line")\r\n    ),\r\n    keyHz = 261.63f  // Middle C\r\n)\r\n\r\nval student = LessonMaterial.fromAudio(\r\n    samples = studentAudio,\r\n    sampleRate = 16000,\r\n    segments = emptyList(),  // Uses reference segments\r\n    keyHz = 261.63f\r\n)\r\n\r\nval extractor = CalibraPitch.createContourExtractor(ContourExtractorConfig.SCORING)\r\nval result = CalibraMelodyEval.evaluate(reference, student, extractor)\r\nextractor.release()\r\n\r\nprintln("Overall: ${result.overallScorePercent}%")\r\nresult.segmentResults.forEach { (index, attempts) ->\r\n    println("Segment $index: ${attempts.last().scorePercent}%")\r\n}\n'})}),"\n",(0,s.jsx)(r.h3,{id:"swift",children:"Swift"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-swift",children:'let reference = LessonMaterial.fromAudio(\r\n    samples: referenceAudio,\r\n    sampleRate: 16000,\r\n    segments: [\r\n        Segment.create(index: 0, startSeconds: 0.0, endSeconds: 3.5, lyrics: "First line"),\r\n        Segment.create(index: 1, startSeconds: 3.5, endSeconds: 7.0, lyrics: "Second line")\r\n    ],\r\n    keyHz: 261.63\r\n)\r\n\r\nlet student = LessonMaterial.fromAudio(\r\n    samples: studentAudio,\r\n    sampleRate: 16000,\r\n    segments: [],\r\n    keyHz: 261.63\r\n)\r\n\r\nlet extractor = CalibraPitch.createContourExtractor(\r\n    config: .scoring\r\n)\r\nlet result = CalibraMelodyEval.evaluate(\r\n    reference: reference,\r\n    student: student,\r\n    contourExtractor: extractor\r\n)\r\nextractor.release()\r\n\r\nprint("Overall: \\(result.overallScorePercent)%")\r\nfor (index, attempts) in result.sortedSegmentResults {\r\n    print("Segment \\(index): \\(attempts.last!.scorePercent)%")\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"evaluate-method",children:"Evaluate Method"}),"\n",(0,s.jsxs)(r.p,{children:["The single public method on ",(0,s.jsx)(r.code,{children:"CalibraMelodyEval"}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"kotlin-1",children:"Kotlin"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kotlin",children:"fun evaluate(\r\n    reference: LessonMaterial,\r\n    student: LessonMaterial,\r\n    contourExtractor: CalibraPitch.ContourExtractor\r\n): SingingResult\n"})}),"\n",(0,s.jsx)(r.h3,{id:"swift-1",children:"Swift"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-swift",children:"static func evaluate(\r\n    reference: LessonMaterial,\r\n    student: LessonMaterial,\r\n    contourExtractor: CalibraPitch.ContourExtractor\r\n) -> SingingResult\n"})}),"\n",(0,s.jsx)(r.h3,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"reference"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"LessonMaterial"})}),(0,s.jsx)(r.td,{children:"Reference material with audio, segments, and key"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"student"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"LessonMaterial"})}),(0,s.jsxs)(r.td,{children:["Student recording with audio and key. If ",(0,s.jsx)(r.code,{children:"segments"})," is empty, reference segments are used. If ",(0,s.jsx)(r.code,{children:"pitchContour"})," is pre-computed, pitch extraction is skipped."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"contourExtractor"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"CalibraPitch.ContourExtractor"})}),(0,s.jsxs)(r.td,{children:["Pre-built contour extractor for pitch extraction. Caller owns the lifecycle and must call ",(0,s.jsx)(r.code,{children:"release()"})," when done."]})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"sample-rate-requirement",children:"Sample Rate Requirement"}),"\n",(0,s.jsxs)(r.p,{children:["Audio in ",(0,s.jsx)(r.code,{children:"LessonMaterial"})," must be ",(0,s.jsx)(r.strong,{children:"16kHz mono"}),". The ",(0,s.jsx)(r.code,{children:"evaluate"})," method validates this and throws ",(0,s.jsx)(r.code,{children:"IllegalArgumentException"})," if the sample rate is not 16000. Use ",(0,s.jsx)(r.code,{children:"SonixDecoder"})," to decode and resample, or call ",(0,s.jsx)(r.code,{children:"SonixResampler.resample()"})," before creating the ",(0,s.jsx)(r.code,{children:"LessonMaterial"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["Note that the ",(0,s.jsx)(r.code,{children:"ContourExtractor.extract()"})," method itself supports internal resampling from any sample rate to 16kHz, but ",(0,s.jsx)(r.code,{children:"CalibraMelodyEval.evaluate"})," enforces 16kHz at the ",(0,s.jsx)(r.code,{children:"LessonMaterial"})," level."]}),"\n",(0,s.jsx)(r.h3,{id:"return-value",children:"Return Value"}),"\n",(0,s.jsxs)(r.p,{children:["Returns ",(0,s.jsx)(r.code,{children:"SingingResult.EMPTY"})," if reference segments are empty, or if either the reference or student pitch contour could not be extracted."]}),"\n",(0,s.jsx)(r.h2,{id:"creating-lessonmaterial",children:"Creating LessonMaterial"}),"\n",(0,s.jsx)(r.h3,{id:"from-audio-samples",children:"From Audio Samples"}),"\n",(0,s.jsx)(r.h4,{id:"kotlin-2",children:"Kotlin"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kotlin",children:"LessonMaterial.fromAudio(\r\n    samples: FloatArray,\r\n    sampleRate: Int,\r\n    segments: List<Segment>,\r\n    keyHz: Float,\r\n    pitchContour: PitchContour? = null,\r\n    hpcpFrames: List<FloatArray>? = null\r\n): LessonMaterial\n"})}),"\n",(0,s.jsx)(r.h4,{id:"swift-2",children:"Swift"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-swift",children:"LessonMaterial.fromAudio(\r\n    samples: [Float],\r\n    sampleRate: Int,\r\n    segments: [Segment],\r\n    keyHz: Float,\r\n    pitchContour: PitchContour? = nil,\r\n    hpcpFrames: [[Float]]? = nil\r\n) -> LessonMaterial\n"})}),"\n",(0,s.jsx)(r.h3,{id:"parameters-1",children:"Parameters"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Parameter"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Default"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"samples"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"FloatArray"})," / ",(0,s.jsx)(r.code,{children:"[Float]"})]}),(0,s.jsx)(r.td,{children:"required"}),(0,s.jsx)(r.td,{children:"Mono audio samples (normalized -1.0 to 1.0)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"sampleRate"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Int"})}),(0,s.jsx)(r.td,{children:"required"}),(0,s.jsx)(r.td,{children:"Sample rate in Hz (must be 16000 for melody eval)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"segments"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"List<Segment>"})," / ",(0,s.jsx)(r.code,{children:"[Segment]"})]}),(0,s.jsx)(r.td,{children:"required"}),(0,s.jsx)(r.td,{children:"Segment boundaries with timing and lyrics"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"keyHz"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Float"})}),(0,s.jsx)(r.td,{children:"required"}),(0,s.jsx)(r.td,{children:"Musical key frequency in Hz (e.g., 261.63 for middle C)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"pitchContour"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"PitchContour?"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"null"})," / ",(0,s.jsx)(r.code,{children:"nil"})]}),(0,s.jsx)(r.td,{children:"Pre-computed pitch contour (skips extraction if provided)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"hpcpFrames"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"List<FloatArray>?"})," / ",(0,s.jsx)(r.code,{children:"[[Float]]?"})]}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"null"})," / ",(0,s.jsx)(r.code,{children:"nil"})]}),(0,s.jsx)(r.td,{children:"Pre-computed HPCP frames for DTW alignment"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"lessonmaterial-properties",children:"LessonMaterial Properties"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Property"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"audioSource"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"AudioSource"})}),(0,s.jsx)(r.td,{children:"Source of the audio data"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"segments"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"List<Segment>"})}),(0,s.jsx)(r.td,{children:"Segment boundaries"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"keyHz"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Float"})}),(0,s.jsx)(r.td,{children:"Musical key frequency in Hz"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"pitchContour"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"PitchContour?"})}),(0,s.jsx)(r.td,{children:"Pre-computed pitch contour"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"hpcpFrames"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"List<FloatArray>?"})}),(0,s.jsx)(r.td,{children:"Pre-computed HPCP frames"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"duration"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Float"})}),(0,s.jsx)(r.td,{children:"Total duration based on last segment end time"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"segmentCount"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Int"})}),(0,s.jsx)(r.td,{children:"Number of segments"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"from-file-path",children:"From File Path"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kotlin",children:"LessonMaterial.fromFile(\r\n    audioPath: String,\r\n    segments: List<Segment>,\r\n    keyHz: Float\r\n): LessonMaterial\n"})}),"\n",(0,s.jsxs)(r.p,{children:["Note: ",(0,s.jsx)(r.code,{children:"AudioSource.File"})," is not currently supported by ",(0,s.jsx)(r.code,{children:"CalibraMelodyEval.evaluate"}),". Decode the file first using ",(0,s.jsx)(r.code,{children:"SonixDecoder"}),", then use ",(0,s.jsx)(r.code,{children:"fromAudio"}),"."]}),"\n",(0,s.jsx)(r.h2,{id:"creating-segments",children:"Creating Segments"}),"\n",(0,s.jsx)(r.h3,{id:"kotlin-3",children:"Kotlin"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kotlin",children:'// Individual segment\r\nval segment = Segment(\r\n    index = 0,\r\n    startSeconds = 0.0f,\r\n    endSeconds = 3.5f,\r\n    lyrics = "Sa Re Ga Ma"\r\n)\r\n\r\n// From parallel arrays\r\nval segments = Segment.fromArrays(\r\n    starts = floatArrayOf(0.0f, 3.5f, 7.0f),\r\n    ends = floatArrayOf(3.5f, 7.0f, 10.5f),\r\n    lyrics = listOf("First line", "Second line", "Third line")\r\n)\r\n\r\n// Singafter segment (student sings after reference)\r\nval singafter = Segment(\r\n    index = 0,\r\n    startSeconds = 0.0f,\r\n    endSeconds = 5.0f,\r\n    lyrics = "Sa Re Ga Ma",\r\n    studentStartSeconds = 2.5f,\r\n    studentEndSeconds = 5.0f\r\n)\n'})}),"\n",(0,s.jsx)(r.h3,{id:"swift-3",children:"Swift"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-swift",children:'// Individual segment\r\nlet segment = Segment.create(\r\n    index: 0,\r\n    startSeconds: 0.0,\r\n    endSeconds: 3.5,\r\n    lyrics: "Sa Re Ga Ma"\r\n)\r\n\r\n// Singafter segment\r\nlet singafter = Segment.create(\r\n    index: 0,\r\n    startSeconds: 0.0,\r\n    endSeconds: 5.0,\r\n    lyrics: "Sa Re Ga Ma",\r\n    studentStartSeconds: 2.5,\r\n    studentEndSeconds: 5.0\r\n)\n'})}),"\n",(0,s.jsx)(r.h3,{id:"segment-properties",children:"Segment Properties"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Property"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"index"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Int"})}),(0,s.jsx)(r.td,{children:"Zero-based segment index"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"startSeconds"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"Float"})," (Kotlin) / ",(0,s.jsx)(r.code,{children:"Double"})," (Swift)"]}),(0,s.jsx)(r.td,{children:"Reference audio start time"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"endSeconds"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"Float"})," (Kotlin) / ",(0,s.jsx)(r.code,{children:"Double"})," (Swift)"]}),(0,s.jsx)(r.td,{children:"Reference audio end time"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"lyrics"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"String"})}),(0,s.jsx)(r.td,{children:"Text/lyrics for this segment (default: empty)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"studentStartSeconds"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Float?"})}),(0,s.jsxs)(r.td,{children:["When student recording starts (null = same as ",(0,s.jsx)(r.code,{children:"startSeconds"}),")"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"studentEndSeconds"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Float?"})}),(0,s.jsxs)(r.td,{children:["When student recording ends (null = same as ",(0,s.jsx)(r.code,{children:"endSeconds"}),")"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"duration"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"Float"})," (Kotlin) / ",(0,s.jsx)(r.code,{children:"Double"})," (Swift)"]}),(0,s.jsx)(r.td,{children:"Duration of the segment in seconds"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"isSingafter"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Boolean"})}),(0,s.jsx)(r.td,{children:"True if student starts after reference"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"effectiveStudentStart"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"Float"})," (Kotlin) / ",(0,s.jsx)(r.code,{children:"Double"})," (Swift)"]}),(0,s.jsxs)(r.td,{children:["Student start time (falls back to ",(0,s.jsx)(r.code,{children:"startSeconds"}),")"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"effectiveStudentEnd"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"Float"})," (Kotlin) / ",(0,s.jsx)(r.code,{children:"Double"})," (Swift)"]}),(0,s.jsxs)(r.td,{children:["Student end time (falls back to ",(0,s.jsx)(r.code,{children:"endSeconds"}),")"]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"studentDuration"})}),(0,s.jsxs)(r.td,{children:[(0,s.jsx)(r.code,{children:"Float"})," (Kotlin) / ",(0,s.jsx)(r.code,{children:"Double"})," (Swift)"]}),(0,s.jsx)(r.td,{children:"Duration of student recording portion"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"result-types",children:"Result Types"}),"\n",(0,s.jsx)(r.h3,{id:"singingresult",children:"SingingResult"}),"\n",(0,s.jsxs)(r.p,{children:["The top-level result returned by ",(0,s.jsx)(r.code,{children:"evaluate"}),"."]}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Property"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"overallScore"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Float"})}),(0,s.jsx)(r.td,{children:"Aggregate score across all segments (0.0 - 1.0)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"overallScorePercent"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Int"})}),(0,s.jsx)(r.td,{children:"Overall score as percentage (0 - 100)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"segmentResults"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Map<Int, List<SegmentResult>>"})}),(0,s.jsx)(r.td,{children:"Map of segment index to list of attempt results"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"aggregation"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"ResultAggregation"})}),(0,s.jsx)(r.td,{children:"How the overall score was calculated"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"segmentCount"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Int"})}),(0,s.jsx)(r.td,{children:"Number of segments evaluated"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"totalAttempts"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Int"})}),(0,s.jsx)(r.td,{children:"Total attempts across all segments"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"allPassing"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Boolean"})}),(0,s.jsx)(r.td,{children:"True if all segments have score >= 0.5"})]})]})]}),"\n",(0,s.jsx)(r.h4,{id:"singingresult-methods",children:"SingingResult Methods"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Method"}),(0,s.jsx)(r.th,{children:"Return Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"latestScorePerSegment()"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Map<Int, Float>"})}),(0,s.jsx)(r.td,{children:"Latest score for each segment"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"bestScorePerSegment()"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Map<Int, Float>"})}),(0,s.jsx)(r.td,{children:"Best score for each segment"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"averageScorePerSegment()"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Map<Int, Float>"})}),(0,s.jsx)(r.td,{children:"Average score for each segment"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"latestResultPerSegment()"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Map<Int, SegmentResult>"})}),(0,s.jsx)(r.td,{children:"Latest result for each segment"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"getAllFeedback()"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"List<String>"})}),(0,s.jsx)(r.td,{children:"Feedback messages for all segments"})]})]})]}),"\n",(0,s.jsx)(r.h4,{id:"swift-only-extensions",children:"Swift-Only Extensions"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-swift",children:'// Iterate segments in order (converts KotlinInt keys to Swift Int)\r\nfor (index, attempts) in result.sortedSegmentResults {\r\n    print("Segment \\(index): \\(attempts.last!.scorePercent)%")\r\n}\r\n\r\n// Access by Swift Int index\r\nif let attempts = result.getSegmentResult(at: 0) {\r\n    print("First segment: \\(attempts.last!.scorePercent)%")\r\n}\n'})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Property/Method"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"sortedSegmentResults"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"[(index: Int, attempts: [SegmentResult])]"})}),(0,s.jsx)(r.td,{children:"Segment results sorted by index"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"getSegmentResult(at:)"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"[SegmentResult]?"})}),(0,s.jsxs)(r.td,{children:["Get attempts for a segment by Swift ",(0,s.jsx)(r.code,{children:"Int"})," index"]})]})]})]}),"\n",(0,s.jsx)(r.h4,{id:"singingresult-constants",children:"SingingResult Constants"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Constant"}),(0,s.jsx)(r.th,{children:"Kotlin"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsx)(r.tbody,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Empty"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"SingingResult.EMPTY"})}),(0,s.jsx)(r.td,{children:"Empty result with score 0 and no segments"})]})})]}),"\n",(0,s.jsx)(r.h3,{id:"segmentresult",children:"SegmentResult"}),"\n",(0,s.jsx)(r.p,{children:"Result for a single evaluated segment."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Property"}),(0,s.jsx)(r.th,{children:"Type"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"segment"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Segment"})}),(0,s.jsx)(r.td,{children:"The segment that was evaluated"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"score"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Float"})}),(0,s.jsx)(r.td,{children:"Overall score (0.0 - 1.0)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"pitchAccuracy"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Float"})}),(0,s.jsx)(r.td,{children:"Pitch accuracy component (0.0 - 1.0)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"level"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"PerformanceLevel"})}),(0,s.jsx)(r.td,{children:"Performance level classification"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"attemptNumber"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Int"})}),(0,s.jsx)(r.td,{children:"Which attempt this is (1-based)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"referencePitch"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"PitchContour"})}),(0,s.jsx)(r.td,{children:"Reference pitch contour for visualization"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"studentPitch"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"PitchContour"})}),(0,s.jsx)(r.td,{children:"Student pitch contour for visualization"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"isPassing"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Boolean"})}),(0,s.jsx)(r.td,{children:"True if score >= 0.5"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"isGood"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Boolean"})}),(0,s.jsx)(r.td,{children:"True if score >= 0.7"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"isExcellent"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Boolean"})}),(0,s.jsx)(r.td,{children:"True if score >= 0.9"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"scorePercent"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"Int"})}),(0,s.jsx)(r.td,{children:"Score as percentage (0 - 100)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"feedbackMessage"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"String"})}),(0,s.jsx)(r.td,{children:"Human-readable feedback based on performance level"})]})]})]}),"\n",(0,s.jsx)(r.h4,{id:"swift-pitch-data-access",children:"Swift Pitch Data Access"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-swift",children:"let (times, pitchesHz, pitchesMidi) = segmentResult.referencePitchData\r\nlet (studentTimes, studentHz, studentMidi) = segmentResult.studentPitchData\n"})}),"\n",(0,s.jsx)(r.h3,{id:"performancelevel",children:"PerformanceLevel"}),"\n",(0,s.jsx)(r.p,{children:"Score-based classification of singing performance."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Level"}),(0,s.jsx)(r.th,{children:"Score Range"}),(0,s.jsx)(r.th,{children:"Display Name"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"NEEDS_WORK"})}),(0,s.jsx)(r.td,{children:"< 0.3"}),(0,s.jsx)(r.td,{children:'"Needs Work"'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"FAIR"})}),(0,s.jsx)(r.td,{children:"0.3 - 0.6"}),(0,s.jsx)(r.td,{children:'"Fair"'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"GOOD"})}),(0,s.jsx)(r.td,{children:"0.6 - 0.8"}),(0,s.jsx)(r.td,{children:'"Good"'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"VERY_GOOD"})}),(0,s.jsx)(r.td,{children:"0.8 - 0.95"}),(0,s.jsx)(r.td,{children:'"Very Good"'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"EXCELLENT"})}),(0,s.jsx)(r.td,{children:">= 0.95"}),(0,s.jsx)(r.td,{children:'"Excellent"'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"NOT_EVALUATED"})}),(0,s.jsx)(r.td,{children:"n/a"}),(0,s.jsx)(r.td,{children:'"Not Evaluated"'})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"NOT_DETECTED"})}),(0,s.jsx)(r.td,{children:"< 0"}),(0,s.jsx)(r.td,{children:'"No Voice"'})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"resultaggregation",children:"ResultAggregation"}),"\n",(0,s.jsx)(r.p,{children:"How multiple attempts per segment are aggregated into a final score."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Value"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"LATEST"})}),(0,s.jsx)(r.td,{children:"Use the most recent attempt's score (default)"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"BEST"})}),(0,s.jsx)(r.td,{children:"Use the highest score across all attempts"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"AVERAGE"})}),(0,s.jsx)(r.td,{children:"Use the average of all attempts"})]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,s.jsx)(r.h3,{id:"post-recording-scoring-android",children:"Post-Recording Scoring (Android)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kotlin",children:"class ScoringViewModel : ViewModel() {\r\n    fun scoreRecording(\r\n        refSamples: FloatArray,\r\n        studentSamples: FloatArray,\r\n        segments: List<Segment>,\r\n        keyHz: Float\r\n    ) {\r\n        viewModelScope.launch(Dispatchers.Default) {\r\n            val reference = LessonMaterial.fromAudio(\r\n                samples = refSamples,\r\n                sampleRate = 16000,\r\n                segments = segments,\r\n                keyHz = keyHz\r\n            )\r\n\r\n            val student = LessonMaterial.fromAudio(\r\n                samples = studentSamples,\r\n                sampleRate = 16000,\r\n                segments = emptyList(),\r\n                keyHz = keyHz\r\n            )\r\n\r\n            val extractor = CalibraPitch.createContourExtractor(\r\n                ContourExtractorConfig.SCORING\r\n            )\r\n\r\n            try {\r\n                val result = CalibraMelodyEval.evaluate(reference, student, extractor)\r\n                _score.value = result.overallScorePercent\r\n                _segmentScores.value = result.latestScorePerSegment()\r\n            } finally {\r\n                extractor.release()\r\n            }\r\n        }\r\n    }\r\n}\n"})}),"\n",(0,s.jsx)(r.h3,{id:"pre-computed-pitch-contour-skip-extraction",children:"Pre-Computed Pitch Contour (Skip Extraction)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kotlin",children:'// Extract pitch once, reuse for multiple evaluations\r\nval extractor = CalibraPitch.createContourExtractor(ContourExtractorConfig.SCORING)\r\nval refContour = extractor.extract(referenceAudio, 16000)\r\n\r\nval reference = LessonMaterial.fromAudio(\r\n    samples = referenceAudio,\r\n    sampleRate = 16000,\r\n    segments = segments,\r\n    keyHz = 261.63f,\r\n    pitchContour = refContour  // Skip re-extraction\r\n)\r\n\r\n// Evaluate multiple student recordings against same reference\r\nfor (studentAudio in recordings) {\r\n    val student = LessonMaterial.fromAudio(\r\n        samples = studentAudio,\r\n        sampleRate = 16000,\r\n        segments = emptyList(),\r\n        keyHz = 261.63f\r\n    )\r\n    val result = CalibraMelodyEval.evaluate(reference, student, extractor)\r\n    println("Score: ${result.overallScorePercent}%")\r\n}\r\n\r\nextractor.release()\n'})}),"\n",(0,s.jsx)(r.h3,{id:"different-keys-student-vs-reference",children:"Different Keys (Student vs Reference)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-kotlin",children:"val reference = LessonMaterial.fromAudio(\r\n    samples = refAudio,\r\n    sampleRate = 16000,\r\n    segments = segments,\r\n    keyHz = 261.63f  // Reference in C4\r\n)\r\n\r\nval student = LessonMaterial.fromAudio(\r\n    samples = studentAudio,\r\n    sampleRate = 16000,\r\n    segments = emptyList(),\r\n    keyHz = 196.0f   // Student sings in G3\r\n)\r\n\r\n// Evaluator normalizes by key difference automatically\r\nval result = CalibraMelodyEval.evaluate(reference, student, extractor)\n"})}),"\n",(0,s.jsx)(r.h3,{id:"segment-results-with-feedback-ios",children:"Segment Results with Feedback (iOS)"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-swift",children:'let result = CalibraMelodyEval.evaluate(\r\n    reference: reference,\r\n    student: student,\r\n    contourExtractor: extractor\r\n)\r\n\r\nfor (index, attempts) in result.sortedSegmentResults {\r\n    guard let latest = attempts.last else { continue }\r\n    print("Segment \\(index): \\(latest.level.displayName)")\r\n    print("  Score: \\(latest.scorePercent)%")\r\n    print("  Feedback: \\(latest.feedbackMessage)")\r\n    print("  Passing: \\(latest.isPassing)")\r\n}\n'})}),"\n",(0,s.jsx)(r.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"./pitch",children:"CalibraPitch"})," -- Pitch detection and contour extraction"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"./vad",children:"CalibraVAD"})," -- Voice activity detection"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"./vocal-range",children:"CalibraVocalRange"})," -- Vocal range analysis"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,d.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},8453(e,r,n){n.d(r,{R:()=>l,x:()=>i});var t=n(6540);const s={},d=t.createContext(s);function l(e){const r=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(d.Provider,{value:r},e.children)}}}]);