"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[7989],{1931(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"guides/authentication","title":"Authentication","description":"A complete guide to authenticating with the VoxaTrace SDK.","source":"@site/docs/guides/authentication.md","sourceDirName":"guides","slug":"/guides/authentication","permalink":"/voxatrace/guides/authentication","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"Live Evaluation","permalink":"/voxatrace/guides/live-evaluation"},"next":{"title":"Karaoke App","permalink":"/voxatrace/cookbook/karaoke-app"}}');var t=i(4848),s=i(8453);const o={sidebar_position:5},d="Authentication",l={},a=[{value:"What You&#39;ll Learn",id:"what-youll-learn",level:2},{value:"Overview",id:"overview",level:2},{value:"API Key Format",id:"api-key-format",level:2},{value:"Method 1: Server Auth (API Key)",id:"method-1-server-auth-api-key",level:2},{value:"Kotlin",id:"kotlin",level:3},{value:"Swift",id:"swift",level:3},{value:"Python",id:"python",level:3},{value:"How It Works",id:"how-it-works",level:3},{value:"When to Use",id:"when-to-use",level:3},{value:"Method 2: Proxy Authentication (Recommended for Mobile)",id:"method-2-proxy-authentication-recommended-for-mobile",level:2},{value:"Kotlin (Android)",id:"kotlin-android",level:3},{value:"Swift (iOS)",id:"swift-ios",level:3},{value:"How It Works",id:"how-it-works-1",level:3},{value:"Implementing the Proxy Server",id:"implementing-the-proxy-server",level:3},{value:"Node.js / Express",id:"nodejs--express",level:4},{value:"Python / FastAPI",id:"python--fastapi",level:4},{value:"Ruby / Rails",id:"ruby--rails",level:4},{value:"Token Lifecycle",id:"token-lifecycle",level:3},{value:"When to Use",id:"when-to-use-1",level:3},{value:"Method 3: App Attestation",id:"method-3-app-attestation",level:2},{value:"Kotlin (Android)",id:"kotlin-android-1",level:3},{value:"Swift (iOS)",id:"swift-ios-1",level:3},{value:"How It Works",id:"how-it-works-2",level:3},{value:"Platform Requirements",id:"platform-requirements",level:3},{value:"Android \u2014 Play Integrity API",id:"android--play-integrity-api",level:4},{value:"iOS \u2014 App Attest",id:"ios--app-attest",level:4},{value:"When to Use",id:"when-to-use-2",level:3},{value:"Choosing the Right Method",id:"choosing-the-right-method",level:2},{value:"Error Handling",id:"error-handling",level:2},{value:"Synchronous Methods (Server Auth, Proxy)",id:"synchronous-methods-server-auth-proxy",level:3},{value:"Async Method (Attestation)",id:"async-method-attestation",level:3},{value:"Common Errors",id:"common-errors",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"authentication",children:"Authentication"})}),"\n",(0,t.jsx)(n.p,{children:"A complete guide to authenticating with the VoxaTrace SDK."}),"\n",(0,t.jsx)(n.h2,{id:"what-youll-learn",children:"What You'll Learn"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Choose the right authentication method for your app"}),"\n",(0,t.jsx)(n.li,{children:"Set up API key authentication for server-side use"}),"\n",(0,t.jsx)(n.li,{children:"Configure proxy-based authentication for production mobile apps"}),"\n",(0,t.jsx)(n.li,{children:"Use platform attestation for mobile apps without a backend"}),"\n",(0,t.jsx)(n.li,{children:"Implement a proxy server for secure key management"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsxs)(n.p,{children:["VoxaTrace must be initialized with valid credentials before any Sonix or Calibra APIs can be used. Calling any factory method before initialization throws ",(0,t.jsx)(n.code,{children:"VoxaTraceNotInitializedException"}),"."]}),"\n",(0,t.jsx)(n.p,{children:"There are three initialization methods:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Method"}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"VT.initialize(proxyEndpoint:)"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"VT.initializeWithAttestation(apiKey:)"})}),(0,t.jsx)(n.th,{children:(0,t.jsx)(n.code,{children:"VT.initializeForServer(apiKey:)"})})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Best for"})}),(0,t.jsx)(n.td,{children:"Production mobile apps with a backend"}),(0,t.jsx)(n.td,{children:"Mobile apps without a backend"}),(0,t.jsx)(n.td,{children:"Server-side, desktop, CLI, testing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"API key location"})}),(0,t.jsx)(n.td,{children:"Your server only"}),(0,t.jsx)(n.td,{children:"Embedded in app"}),(0,t.jsx)(n.td,{children:"Environment variable or config"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Security"})}),(0,t.jsx)(n.td,{children:"Highest \u2014 key never leaves your server"}),(0,t.jsx)(n.td,{children:"High \u2014 protected by Play Integrity / App Attest"}),(0,t.jsx)(n.td,{children:"Depends on environment"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Requires backend"})}),(0,t.jsx)(n.td,{children:"Yes"}),(0,t.jsx)(n.td,{children:"No"}),(0,t.jsx)(n.td,{children:"No"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Async"})}),(0,t.jsx)(n.td,{children:"No (synchronous)"}),(0,t.jsx)(n.td,{children:"Yes (callback)"}),(0,t.jsx)(n.td,{children:"No (synchronous)"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"api-key-format",children:"API Key Format"}),"\n",(0,t.jsx)(n.p,{children:"VoxaTrace API keys follow the format:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"sk_live_..."})," \u2014 Production keys (metered usage)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"sk_test_..."})," \u2014 Test keys (free, rate-limited)"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Get your key from the ",(0,t.jsx)(n.a,{href:"https://dashboard.musicmuni.com",children:"VoxaTrace Dashboard"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"method-1-server-auth-api-key",children:"Method 1: Server Auth (API Key)"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"VT.initializeForServer"})," when running outside mobile apps \u2014 server-side processing, desktop applications, Python bindings, CLI tools, or automated tests."]}),"\n",(0,t.jsx)(n.h3,{id:"kotlin",children:"Kotlin"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:'try {\r\n    VT.initializeForServer(\r\n        apiKey = "sk_live_abc123...",\r\n        debugLogging = BuildConfig.DEBUG,\r\n        preload = setOf(AIModels.Pitch.REALTIME)\r\n    )\r\n} catch (e: VoxaTraceKilledException) {\r\n    println("License error: ${e.message}")\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"swift",children:"Swift"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'do {\r\n    try VT.initializeForServer(apiKey: "sk_live_abc123...")\r\n} catch {\r\n    print("License error: \\(error)")\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"python",children:"Python"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import voxatrace as vt\r\n\r\nvt.initialize_for_server("sk_live_abc123...")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["SDK sends the API key to ",(0,t.jsx)(n.code,{children:"https://api.musicmuni.com/v1/voxatrace/devices/register"})]}),"\n",(0,t.jsx)(n.li,{children:"Server validates the key and returns a device token"}),"\n",(0,t.jsx)(n.li,{children:"SDK uses the device token for all subsequent requests"}),"\n",(0,t.jsx)(n.li,{children:"Token refreshes automatically (30-day expiration, 7-day refresh window)"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"when-to-use",children:"When to Use"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Server-side audio processing pipelines"}),"\n",(0,t.jsx)(n.li,{children:"Desktop or CLI applications"}),"\n",(0,t.jsx)(n.li,{children:"Automated testing and CI/CD"}),"\n",(0,t.jsx)(n.li,{children:"Development and prototyping"}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"caution",children:(0,t.jsxs)(n.p,{children:["Do not embed ",(0,t.jsx)(n.code,{children:"sk_live_"})," keys directly in mobile app code shipped to users. Use ",(0,t.jsx)(n.strong,{children:"Proxy"})," or ",(0,t.jsx)(n.strong,{children:"App Attestation"})," instead."]})}),"\n",(0,t.jsx)(n.h2,{id:"method-2-proxy-authentication-recommended-for-mobile",children:"Method 2: Proxy Authentication (Recommended for Mobile)"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"VT.initialize(proxyEndpoint:)"})," for production mobile apps. Your API key stays on your server, and the SDK receives a short-lived device token."]}),"\n",(0,t.jsx)(n.h3,{id:"kotlin-android",children:"Kotlin (Android)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:'// In Application.onCreate()\r\ntry {\r\n    VT.initialize(\r\n        proxyEndpoint = "https://your-server.com/voxatrace/register",\r\n        context = this,\r\n        debugLogging = BuildConfig.DEBUG,\r\n        preload = setOf(AIModels.Pitch.REALTIME)\r\n    )\r\n} catch (e: VoxaTraceKilledException) {\r\n    // License invalid \u2014 disable VoxaTrace features\r\n    showError("License error: ${e.message}")\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"swift-ios",children:"Swift (iOS)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'// In AppDelegate or @main App init\r\ndo {\r\n    try VT.initialize(proxyEndpoint: "https://your-server.com/voxatrace/register")\r\n} catch {\r\n    print("License error: \\(error)")\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"how-it-works-1",children:"How It Works"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502   SDK   \u2502\u2500\u2500(1)\u2500\u2500\u25b6\u2502 Your Server \u2502\u2500\u2500(2)\u2500\u2500\u25b6\u2502 VoxaTrace API     \u2502\r\n\u2502 (device)\u2502\u25c0\u2500\u2500(4)\u2500\u2500\u2502   (proxy)   \u2502\u25c0\u2500\u2500(3)\u2500\u2500\u2502 api.musicmuni.com \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["SDK sends ",(0,t.jsx)(n.code,{children:'{ "device_id": "sha256_hash" }'})," to your proxy endpoint"]}),"\n",(0,t.jsxs)(n.li,{children:["Your server authenticates the user (your auth system), then forwards the request to VoxaTrace with your ",(0,t.jsx)(n.code,{children:"sk_live_"})," key"]}),"\n",(0,t.jsxs)(n.li,{children:["VoxaTrace returns ",(0,t.jsx)(n.code,{children:'{ "device_token": "dt_xxx", "expires_at": 1735689600 }'})]}),"\n",(0,t.jsx)(n.li,{children:"Your server forwards the response back to the SDK"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"implementing-the-proxy-server",children:"Implementing the Proxy Server"}),"\n",(0,t.jsx)(n.p,{children:"Your proxy needs a single endpoint that forwards device registration requests."}),"\n",(0,t.jsx)(n.h4,{id:"nodejs--express",children:"Node.js / Express"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"app.post('/voxatrace/register', authenticateUser, async (req, res) => {\r\n  const response = await fetch(\r\n    'https://api.musicmuni.com/v1/voxatrace/devices/register',\r\n    {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${process.env.VOXATRACE_API_KEY}`,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ device_id: req.body.device_id }),\r\n    }\r\n  );\r\n  const data = await response.json();\r\n  res.json(data);\r\n});\n"})}),"\n",(0,t.jsx)(n.h4,{id:"python--fastapi",children:"Python / FastAPI"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'@app.post("/voxatrace/register")\r\nasync def register_device(request: Request, user=Depends(authenticate_user)):\r\n    body = await request.json()\r\n    response = requests.post(\r\n        "https://api.musicmuni.com/v1/voxatrace/devices/register",\r\n        headers={\r\n            "Authorization": f"Bearer {os.environ[\'VOXATRACE_API_KEY\']}",\r\n            "Content-Type": "application/json",\r\n        },\r\n        json={"device_id": body["device_id"]},\r\n    )\r\n    return response.json()\n'})}),"\n",(0,t.jsx)(n.h4,{id:"ruby--rails",children:"Ruby / Rails"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'class VoxatraceController < ApplicationController\r\n  before_action :authenticate_user!\r\n\r\n  def register\r\n    response = HTTP.auth("Bearer #{ENV[\'VOXATRACE_API_KEY\']}")\r\n                   .post("https://api.musicmuni.com/v1/voxatrace/devices/register",\r\n                         json: { device_id: params[:device_id] })\r\n    render json: response.parse\r\n  end\r\nend\n'})}),"\n",(0,t.jsx)(n.h3,{id:"token-lifecycle",children:"Token Lifecycle"}),"\n",(0,t.jsx)(n.p,{children:"The SDK manages token lifecycle automatically:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Event"}),(0,t.jsx)(n.th,{children:"Timing"}),(0,t.jsx)(n.th,{children:"SDK Behavior"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Token issued"}),(0,t.jsx)(n.td,{children:"Day 0"}),(0,t.jsx)(n.td,{children:"Stored securely (EncryptedSharedPreferences / Keychain)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Refresh"}),(0,t.jsx)(n.td,{children:"Day 23+ (< 7 days remaining)"}),(0,t.jsx)(n.td,{children:"SDK calls proxy to get a new token"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Expiration"}),(0,t.jsx)(n.td,{children:"Day 30"}),(0,t.jsx)(n.td,{children:"Token invalid, SDK requests new one"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Grace period"}),(0,t.jsx)(n.td,{children:"Day 30\u201337"}),(0,t.jsx)(n.td,{children:"SDK continues to work while refreshing"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"No action is required from app developers \u2014 refresh is fully transparent."}),"\n",(0,t.jsx)(n.h3,{id:"when-to-use-1",children:"When to Use"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Production mobile apps distributed to users"}),"\n",(0,t.jsx)(n.li,{children:"Any app where you have a backend server"}),"\n",(0,t.jsx)(n.li,{children:"When you need to control or revoke access per-user"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"method-3-app-attestation",children:"Method 3: App Attestation"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"VT.initializeWithAttestation(apiKey:)"})," for mobile apps that don't have a backend server. The SDK uses platform-level attestation to prove the app is genuine before activating."]}),"\n",(0,t.jsx)(n.h3,{id:"kotlin-android-1",children:"Kotlin (Android)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:'// In Application.onCreate()\r\nVT.initializeWithAttestation(\r\n    apiKey = "sk_live_abc123...",\r\n    context = this,\r\n    debugLogging = BuildConfig.DEBUG,\r\n    preload = setOf(AIModels.Pitch.REALTIME)\r\n) { success, error ->\r\n    if (success) {\r\n        // SDK ready\r\n    } else {\r\n        showError("License error: $error")\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"swift-ios-1",children:"Swift (iOS)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-swift",children:'VT.initializeWithAttestation(apiKey: "sk_live_abc123...") { success, error in\r\n    if success {\r\n        // SDK ready\r\n    } else {\r\n        print("License error: \\(error ?? "unknown")")\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"how-it-works-2",children:"How It Works"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"SDK generates a hardware-backed attestation using the platform API"}),"\n",(0,t.jsx)(n.li,{children:"Attestation is sent to VoxaTrace along with the API key"}),"\n",(0,t.jsx)(n.li,{children:"VoxaTrace verifies the attestation and issues a device token"}),"\n",(0,t.jsx)(n.li,{children:"Token is cached securely \u2014 attestation is only repeated when the token expires"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"platform-requirements",children:"Platform Requirements"}),"\n",(0,t.jsx)(n.h4,{id:"android--play-integrity-api",children:"Android \u2014 Play Integrity API"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"App must be distributed via Google Play Store"}),"\n",(0,t.jsx)(n.li,{children:"Device must have Google Play Services"}),"\n",(0,t.jsx)(n.li,{children:"Requires the Play Integrity dependency:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:'dependencies {\r\n    implementation("com.google.android.play:integrity:1.3.0")\r\n}\n'})}),"\n",(0,t.jsx)(n.h4,{id:"ios--app-attest",children:"iOS \u2014 App Attest"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"iOS 14.0 or later"}),"\n",(0,t.jsx)(n.li,{children:"Physical device (not Simulator)"}),"\n",(0,t.jsx)(n.li,{children:"App Attest entitlement must be enabled in your provisioning profile"}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["Attestation is ",(0,t.jsx)(n.strong,{children:"async"})," because it requires a network round-trip to the platform's attestation service and then to VoxaTrace. The callback fires on the main thread."]})}),"\n",(0,t.jsx)(n.h3,{id:"when-to-use-2",children:"When to Use"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Mobile apps without a backend server"}),"\n",(0,t.jsx)(n.li,{children:"Indie apps or prototypes going to production"}),"\n",(0,t.jsx)(n.li,{children:"When proxy setup is not feasible"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"choosing-the-right-method",children:"Choosing the Right Method"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Do you have a backend server?\r\n\u251c\u2500\u2500 Yes \u2192 Use Proxy (Method 2)\r\n\u2514\u2500\u2500 No\r\n    \u251c\u2500\u2500 Mobile app? \u2192 Use Attestation (Method 3)\r\n    \u2514\u2500\u2500 Server/Desktop/CLI? \u2192 Use Server Auth (Method 1)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,t.jsx)(n.p,{children:"All initialization methods can fail if credentials are invalid or revoked."}),"\n",(0,t.jsx)(n.h3,{id:"synchronous-methods-server-auth-proxy",children:"Synchronous Methods (Server Auth, Proxy)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:'try {\r\n    VT.initialize(proxyEndpoint = "https://your-server.com/voxatrace/register", context = this)\r\n} catch (e: VoxaTraceKilledException) {\r\n    // API key revoked, license expired, or network error\r\n    Log.e("VoxaTrace", "Init failed: ${e.message}")\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"async-method-attestation",children:"Async Method (Attestation)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-kotlin",children:'VT.initializeWithAttestation(apiKey = "sk_live_...", context = this) { success, error ->\r\n    if (!success) {\r\n        // Attestation failed, device not supported, or key invalid\r\n        Log.e("VoxaTrace", "Init failed: $error")\r\n    }\r\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"common-errors",children:"Common Errors"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Error"}),(0,t.jsx)(n.th,{children:"Cause"}),(0,t.jsx)(n.th,{children:"Fix"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"VoxaTraceKilledException"})}),(0,t.jsx)(n.td,{children:"Invalid or revoked API key"}),(0,t.jsx)(n.td,{children:"Check your key on the dashboard"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:'"Platform attestation not available"'}),(0,t.jsx)(n.td,{children:"Device doesn't support Play Integrity / App Attest"}),(0,t.jsx)(n.td,{children:"Fall back to proxy, or test on a physical device"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Network timeout"}),(0,t.jsx)(n.td,{children:"Can't reach VoxaTrace API or proxy"}),(0,t.jsx)(n.td,{children:"Check network connectivity and endpoint URL"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"VoxaTraceNotInitializedException"})}),(0,t.jsxs)(n.td,{children:["Using SDK before calling ",(0,t.jsx)(n.code,{children:"VT.initialize"})]}),(0,t.jsxs)(n.td,{children:["Move initialization to ",(0,t.jsx)(n.code,{children:"Application.onCreate()"})," or app launch"]})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Never ship ",(0,t.jsx)(n.code,{children:"sk_live_"})," keys in mobile app source code"]})," unless using attestation. Use proxy or attestation instead."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rotate keys"})," periodically via the dashboard. Existing device tokens continue to work until they expire."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Authenticate your proxy endpoint"})," with your own auth system (session tokens, JWTs, etc.) to prevent unauthorized device registration."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Use ",(0,t.jsx)(n.code,{children:"sk_test_"})," keys"]})," during development \u2014 they're free and rate-limited, so there's no risk if accidentally leaked."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Store keys in environment variables"})," for server-side deployments, not in source code."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../getting-started/installation",children:"Installation"})," - Set up VoxaTrace"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../getting-started/android-quickstart",children:"Android Quickstart"})," - Build your first Android app"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"../getting-started/ios-quickstart",children:"iOS Quickstart"})," - Build your first iOS app"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>d});var r=i(6540);const t={},s=r.createContext(t);function o(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);