<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-calibra/utilities" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Utilities &amp; Shared Types | VoxaTrace</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://musicmuni.github.io/voxatrace/img/voxatrace-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://musicmuni.github.io/voxatrace/img/voxatrace-social-card.jpg"><meta data-rh="true" property="og:url" content="https://musicmuni.github.io/voxatrace/calibra/utilities"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Utilities &amp; Shared Types | VoxaTrace"><meta data-rh="true" name="description" content="Shared model types, error types, and time utilities used across Calibra APIs."><meta data-rh="true" property="og:description" content="Shared model types, error types, and time utilities used across Calibra APIs."><link data-rh="true" rel="icon" href="/voxatrace/img/favicon.png"><link data-rh="true" rel="canonical" href="https://musicmuni.github.io/voxatrace/calibra/utilities"><link data-rh="true" rel="alternate" href="https://musicmuni.github.io/voxatrace/calibra/utilities" hreflang="en"><link data-rh="true" rel="alternate" href="https://musicmuni.github.io/voxatrace/calibra/utilities" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Utilities & Shared Types","item":"https://musicmuni.github.io/voxatrace/calibra/utilities"}]}</script><link rel="stylesheet" href="/voxatrace/assets/css/styles.909d98f3.css">
<script src="/voxatrace/assets/js/runtime~main.540fe1c4.js" defer="defer"></script>
<script src="/voxatrace/assets/js/main.d75bdafd.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/voxatrace/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/voxatrace/"><div class="navbar__logo"><img src="/voxatrace/img/logo.png" alt="VoxaTrace Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/voxatrace/img/logo.png" alt="VoxaTrace Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">VoxaTrace</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/voxatrace/">Docs</a><a href="/voxatrace/api/index.html" target="_self" rel="noopener noreferrer" class="navbar__item navbar__link">API Reference<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/musicmuni/voxatrace" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/voxatrace/"><span title="VoxaTrace" class="linkLabel_WmDU">VoxaTrace</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/voxatrace/getting-started/installation"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/voxatrace/concepts/pitch-detection"><span title="Concepts" class="categoryLinkLabel_W154">Concepts</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/voxatrace/guides/playing-audio"><span title="Guides" class="categoryLinkLabel_W154">Guides</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/voxatrace/cookbook/karaoke-app"><span title="Cookbook" class="categoryLinkLabel_W154">Cookbook</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/voxatrace/sonix/overview"><span title="Sonix" class="categoryLinkLabel_W154">Sonix</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/voxatrace/calibra/overview"><span title="Calibra" class="categoryLinkLabel_W154">Calibra</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/overview"><span title="Calibra Overview" class="linkLabel_WmDU">Calibra Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/pitch"><span title="CalibraPitch" class="linkLabel_WmDU">CalibraPitch</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/vad"><span title="CalibraVAD" class="linkLabel_WmDU">CalibraVAD</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/vocal-range"><span title="CalibraVocalRange" class="linkLabel_WmDU">CalibraVocalRange</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/live-eval"><span title="CalibraLiveEval" class="linkLabel_WmDU">CalibraLiveEval</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/melody-eval"><span title="CalibraMelodyEval" class="linkLabel_WmDU">CalibraMelodyEval</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/note-eval"><span title="CalibraNoteEval" class="linkLabel_WmDU">CalibraNoteEval</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/music"><span title="CalibraMusic" class="linkLabel_WmDU">CalibraMusic</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/breath"><span title="CalibraBreath" class="linkLabel_WmDU">CalibraBreath</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/speaking-pitch"><span title="CalibraSpeakingPitch" class="linkLabel_WmDU">CalibraSpeakingPitch</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/voxatrace/calibra/effects"><span title="CalibraEffects" class="linkLabel_WmDU">CalibraEffects</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/voxatrace/calibra/utilities"><span title="Utilities &amp; Shared Types" class="linkLabel_WmDU">Utilities &amp; Shared Types</span></a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/voxatrace/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Calibra</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Utilities &amp; Shared Types</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Utilities &amp; Shared Types</h1></header>
<p>Shared model types, error types, and time utilities used across Calibra APIs.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lessonmaterial">LessonMaterial<a href="#lessonmaterial" class="hash-link" aria-label="Direct link to LessonMaterial" title="Direct link to LessonMaterial" translate="no">​</a></h2>
<p>Reference material for singing evaluation. Contains the reference audio, segment boundaries, and musical key.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-lessonmaterial">Creating LessonMaterial<a href="#creating-lessonmaterial" class="hash-link" aria-label="Direct link to Creating LessonMaterial" title="Direct link to Creating LessonMaterial" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-file">From File<a href="#from-file" class="hash-link" aria-label="Direct link to From File" title="Direct link to From File" translate="no">​</a></h4>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">val</span><span class="token plain"> material </span><span class="token operator">=</span><span class="token plain"> LessonMaterial</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">fromFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    audioPath </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;/path/to/reference.mp3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    segments </span><span class="token operator">=</span><span class="token plain"> segments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    keyHz </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">261.63f</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Middle C</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> material </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">LessonMaterial</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">fromFile</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    audioPath</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;/path/to/reference.mp3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    segments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> segments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    keyHz</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">261.63</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="from-audio-samples">From Audio Samples<a href="#from-audio-samples" class="hash-link" aria-label="Direct link to From Audio Samples" title="Direct link to From Audio Samples" translate="no">​</a></h4>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">val</span><span class="token plain"> material </span><span class="token operator">=</span><span class="token plain"> LessonMaterial</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">fromAudio</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    samples </span><span class="token operator">=</span><span class="token plain"> audioSamples</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sampleRate </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">16000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    segments </span><span class="token operator">=</span><span class="token plain"> segments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    keyHz </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">196.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pitchContour </span><span class="token operator">=</span><span class="token plain"> precomputedContour</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// Optional: enables fast path</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hpcpFrames </span><span class="token operator">=</span><span class="token plain"> precomputedHpcp        </span><span class="token comment" style="color:rgb(98, 114, 164)">// Optional: for DTW alignment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> material </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">LessonMaterial</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">fromAudio</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    samples</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> audioSamples</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sampleRate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">16000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    segments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> segments</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    keyHz</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">196.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pitchContour</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> precomputedContour</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    hpcpFrames</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> precomputedHpcp</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties">Properties<a href="#properties" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>audioSource</code></td><td><code>AudioSource</code></td><td>Source of the reference audio</td></tr><tr><td><code>segments</code></td><td><code>List&lt;Segment&gt;</code></td><td>List of segments with timing and lyrics</td></tr><tr><td><code>keyHz</code></td><td><code>Float</code></td><td>Musical key frequency in Hz (e.g., 261.63 for middle C)</td></tr><tr><td><code>pitchContour</code></td><td><code>PitchContour?</code></td><td>Pre-computed pitch contour (enables fast path, skipping YIN extraction)</td></tr><tr><td><code>hpcpFrames</code></td><td><code>List&lt;FloatArray&gt;?</code></td><td>Pre-computed HPCP frames for DTW alignment (each frame is 12 floats)</td></tr><tr><td><code>duration</code></td><td><code>Float</code></td><td>Total duration based on the last segment&#x27;s end time</td></tr><tr><td><code>segmentCount</code></td><td><code>Int</code></td><td>Number of segments</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="audiosource">AudioSource<a href="#audiosource" class="hash-link" aria-label="Direct link to AudioSource" title="Direct link to AudioSource" translate="no">​</a></h2>
<p>Represents the source of audio data for evaluation. A sealed class with three variants.</p>
<table><thead><tr><th>Variant</th><th>Properties</th><th>Description</th></tr></thead><tbody><tr><td><code>AudioSource.File</code></td><td><code>path: String</code></td><td>Audio from a local file path</td></tr><tr><td><code>AudioSource.Url</code></td><td><code>url: String</code></td><td>Audio from a URL (for future streaming support)</td></tr><tr><td><code>AudioSource.Samples</code></td><td><code>samples: FloatArray</code>, <code>sampleRate: Int</code></td><td>Raw audio samples already in memory (default 16000 Hz)</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="segment">Segment<a href="#segment" class="hash-link" aria-label="Direct link to Segment" title="Direct link to Segment" translate="no">​</a></h2>
<p>A segment of a song or exercise with timing and optional lyrics. Supports both singalong (student sings with reference) and singafter (student sings after reference) modes.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-segments">Creating Segments<a href="#creating-segments" class="hash-link" aria-label="Direct link to Creating Segments" title="Direct link to Creating Segments" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kotlin">Kotlin<a href="#kotlin" class="hash-link" aria-label="Direct link to Kotlin" title="Direct link to Kotlin" translate="no">​</a></h4>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Single segment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">val</span><span class="token plain"> segment </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">Segment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    index </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    startSeconds </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    endSeconds </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">5.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    lyrics </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;Sa Re Ga Ma&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Singafter segment (student sings after reference)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">val</span><span class="token plain"> segment </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">Segment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    index </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    startSeconds </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    endSeconds </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">5.0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    lyrics </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;Sa Re Ga Ma&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    studentStartSeconds </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2.5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    studentEndSeconds </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">5.0f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// From parallel arrays</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">val</span><span class="token plain"> segments </span><span class="token operator">=</span><span class="token plain"> Segment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">fromArrays</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    starts </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">floatArrayOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ends </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">floatArrayOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">10f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token number">15f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    lyrics </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">listOf</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;Line 1&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;Line 2&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;Line 3&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="swift">Swift<a href="#swift" class="hash-link" aria-label="Direct link to Swift" title="Direct link to Swift" translate="no">​</a></h4>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Single segment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> segment </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Segment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    index</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    startSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    endSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    lyrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;Sa Re Ga Ma&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Singafter segment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> segment </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Segment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    index</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    startSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    endSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5.0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    lyrics</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;Sa Re Ga Ma&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    studentStartSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">2.5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    studentEndSeconds</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">5.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties-1">Properties<a href="#properties-1" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Kotlin</th><th>Swift</th><th>Description</th></tr></thead><tbody><tr><td><code>index</code></td><td><code>Int</code></td><td><code>Int</code></td><td><code>Int</code> (via extension)</td><td>Zero-based index of the segment</td></tr><tr><td><code>startSeconds</code></td><td><code>Float</code></td><td><code>Float</code></td><td><code>Double</code> (via extension)</td><td>Reference audio start time in seconds</td></tr><tr><td><code>endSeconds</code></td><td><code>Float</code></td><td><code>Float</code></td><td><code>Double</code> (via extension)</td><td>Reference audio end time in seconds</td></tr><tr><td><code>lyrics</code></td><td><code>String</code></td><td><code>String</code></td><td><code>String</code></td><td>Text/lyrics for this segment</td></tr><tr><td><code>studentStartSeconds</code></td><td><code>Float?</code></td><td><code>Float?</code></td><td><code>KotlinFloat?</code></td><td>When student recording starts (null = same as startSeconds)</td></tr><tr><td><code>studentEndSeconds</code></td><td><code>Float?</code></td><td><code>Float?</code></td><td><code>KotlinFloat?</code></td><td>When student recording ends (null = same as endSeconds)</td></tr><tr><td><code>duration</code></td><td><code>Float</code></td><td><code>Float</code></td><td><code>Double</code> (via extension)</td><td>Duration of the segment in seconds</td></tr><tr><td><code>isSingafter</code></td><td><code>Boolean</code></td><td><code>Boolean</code></td><td><code>Bool</code></td><td>True if student starts after reference</td></tr><tr><td><code>effectiveStudentStart</code></td><td><code>Float</code></td><td><code>Float</code></td><td><code>Double</code> (via extension)</td><td>Effective student start time (falls back to segment start)</td></tr><tr><td><code>effectiveStudentEnd</code></td><td><code>Float</code></td><td><code>Float</code></td><td><code>Double</code> (via extension)</td><td>Effective student end time (falls back to segment end)</td></tr><tr><td><code>studentDuration</code></td><td><code>Float</code></td><td><code>Float</code></td><td><code>Double</code> (via extension)</td><td>Duration of the student recording portion</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="factory-methods">Factory Methods<a href="#factory-methods" class="hash-link" aria-label="Direct link to Factory Methods" title="Direct link to Factory Methods" translate="no">​</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>Segment.fromArrays(starts, ends, lyrics, studentStarts, studentEnds)</code></td><td>Create segments from parallel arrays of start and end times</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="segmentresult">SegmentResult<a href="#segmentresult" class="hash-link" aria-label="Direct link to SegmentResult" title="Direct link to SegmentResult" translate="no">​</a></h2>
<p>Result of evaluating a single segment.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties-2">Properties<a href="#properties-2" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>segment</code></td><td><code>Segment</code></td><td>The segment that was evaluated</td></tr><tr><td><code>score</code></td><td><code>Float</code></td><td>Overall score for this segment (0.0 - 1.0)</td></tr><tr><td><code>pitchAccuracy</code></td><td><code>Float</code></td><td>Pitch accuracy component of the score (0.0 - 1.0)</td></tr><tr><td><code>level</code></td><td><code>PerformanceLevel</code></td><td>Performance level classification</td></tr><tr><td><code>attemptNumber</code></td><td><code>Int</code></td><td>Which attempt this is (1-based, for retry tracking)</td></tr><tr><td><code>referencePitch</code></td><td><code>PitchContour</code></td><td>Reference pitch contour for visualization</td></tr><tr><td><code>studentPitch</code></td><td><code>PitchContour</code></td><td>Student pitch contour for visualization</td></tr><tr><td><code>isPassing</code></td><td><code>Boolean</code></td><td>True if score &gt;= 0.5</td></tr><tr><td><code>isGood</code></td><td><code>Boolean</code></td><td>True if score &gt;= 0.7</td></tr><tr><td><code>isExcellent</code></td><td><code>Boolean</code></td><td>True if score &gt;= 0.9</td></tr><tr><td><code>scorePercent</code></td><td><code>Int</code></td><td>Score as a percentage (0-100)</td></tr><tr><td><code>feedbackMessage</code></td><td><code>String</code></td><td>Human-readable feedback based on performance level</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="swift-pitch-data-extensions">Swift Pitch Data Extensions<a href="#swift-pitch-data-extensions" class="hash-link" aria-label="Direct link to Swift Pitch Data Extensions" title="Direct link to Swift Pitch Data Extensions" translate="no">​</a></h3>
<p>In Swift, pitch contour data is accessed via tuple extensions:</p>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">SegmentResult</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Reference pitch data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> ref </span><span class="token operator">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">referencePitchData</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// ref.times: [Float], ref.pitchesHz: [Float], ref.pitchesMidi: [Float]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Student pitch data</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> student </span><span class="token operator">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">studentPitchData</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// student.times: [Float], student.pitchesHz: [Float], student.pitchesMidi: [Float]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="factory-method">Factory Method<a href="#factory-method" class="hash-link" aria-label="Direct link to Factory Method" title="Direct link to Factory Method" translate="no">​</a></h3>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">val</span><span class="token plain"> result </span><span class="token operator">=</span><span class="token plain"> SegmentResult</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    segment </span><span class="token operator">=</span><span class="token plain"> segment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    score </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0.85f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pitchAccuracy </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0.82f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    attemptNumber </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    referencePitch </span><span class="token operator">=</span><span class="token plain"> refContour</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    studentPitch </span><span class="token operator">=</span><span class="token plain"> studentContour</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="singingresult">SingingResult<a href="#singingresult" class="hash-link" aria-label="Direct link to SingingResult" title="Direct link to SingingResult" translate="no">​</a></h2>
<p>Complete result of a singing evaluation session, aggregating results across all segments.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties-3">Properties<a href="#properties-3" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>overallScore</code></td><td><code>Float</code></td><td>Aggregate score across all segments (0.0 - 1.0)</td></tr><tr><td><code>segmentResults</code></td><td><code>Map&lt;Int, List&lt;SegmentResult&gt;&gt;</code></td><td>Map of segment index to list of attempts</td></tr><tr><td><code>aggregation</code></td><td><code>ResultAggregation</code></td><td>How the overall score was calculated</td></tr><tr><td><code>overallScorePercent</code></td><td><code>Int</code></td><td>Overall score as a percentage (0-100)</td></tr><tr><td><code>segmentCount</code></td><td><code>Int</code></td><td>Number of segments evaluated</td></tr><tr><td><code>totalAttempts</code></td><td><code>Int</code></td><td>Number of total attempts across all segments</td></tr><tr><td><code>allPassing</code></td><td><code>Boolean</code></td><td>True if all segments pass (score &gt;= 0.5)</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="methods">Methods<a href="#methods" class="hash-link" aria-label="Direct link to Methods" title="Direct link to Methods" translate="no">​</a></h3>
<table><thead><tr><th>Method</th><th>Return Type</th><th>Description</th></tr></thead><tbody><tr><td><code>latestScorePerSegment()</code></td><td><code>Map&lt;Int, Float&gt;</code></td><td>Get the latest score for each segment</td></tr><tr><td><code>bestScorePerSegment()</code></td><td><code>Map&lt;Int, Float&gt;</code></td><td>Get the best score for each segment</td></tr><tr><td><code>averageScorePerSegment()</code></td><td><code>Map&lt;Int, Float&gt;</code></td><td>Get the average score for each segment</td></tr><tr><td><code>latestResultPerSegment()</code></td><td><code>Map&lt;Int, SegmentResult&gt;</code></td><td>Get the latest result for each segment</td></tr><tr><td><code>getAllFeedback()</code></td><td><code>List&lt;String&gt;</code></td><td>Get feedback messages for all segments</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="swift-convenience-methods">Swift Convenience Methods<a href="#swift-convenience-methods" class="hash-link" aria-label="Direct link to Swift Convenience Methods" title="Direct link to Swift Convenience Methods" translate="no">​</a></h3>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token class-name">SingingResult</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Latest score for a specific segment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> score </span><span class="token operator">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">latestScore</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">forSegment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;Score: </span><span class="token string-literal interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">\(</span><span class="token string-literal interpolation class-name">Int</span><span class="token string-literal interpolation punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal interpolation">score </span><span class="token string-literal interpolation operator">*</span><span class="token string-literal interpolation"> </span><span class="token string-literal interpolation number">100</span><span class="token string-literal interpolation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token string-literal interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token string-literal string" style="color:rgb(255, 121, 198)">%&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// Best score for a specific segment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> best </span><span class="token operator">=</span><span class="token plain"> result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">bestScore</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">forSegment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;Best: </span><span class="token string-literal interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">\(</span><span class="token string-literal interpolation class-name">Int</span><span class="token string-literal interpolation punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal interpolation">best </span><span class="token string-literal interpolation operator">*</span><span class="token string-literal interpolation"> </span><span class="token string-literal interpolation number">100</span><span class="token string-literal interpolation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token string-literal interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token string-literal string" style="color:rgb(255, 121, 198)">%&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="static-members">Static Members<a href="#static-members" class="hash-link" aria-label="Direct link to Static Members" title="Direct link to Static Members" translate="no">​</a></h3>
<table><thead><tr><th>Member</th><th>Description</th></tr></thead><tbody><tr><td><code>SingingResult.EMPTY</code></td><td>Empty result constant (score 0, no segments)</td></tr><tr><td><code>SingingResult.calculateOverallScore(segmentResults, aggregation)</code></td><td>Calculate overall score from segment results</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="resultaggregation">ResultAggregation<a href="#resultaggregation" class="hash-link" aria-label="Direct link to ResultAggregation" title="Direct link to ResultAggregation" translate="no">​</a></h2>
<p>How to aggregate multiple attempts per segment into a final score.</p>
<table><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>LATEST</code></td><td>Use the most recent attempt&#x27;s score</td></tr><tr><td><code>BEST</code></td><td>Use the highest score across all attempts</td></tr><tr><td><code>AVERAGE</code></td><td>Use the average of all attempts</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performancelevel">PerformanceLevel<a href="#performancelevel" class="hash-link" aria-label="Direct link to PerformanceLevel" title="Direct link to PerformanceLevel" translate="no">​</a></h2>
<p>Score-based classification for singing evaluation results.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="values">Values<a href="#values" class="hash-link" aria-label="Direct link to Values" title="Direct link to Values" translate="no">​</a></h3>
<table><thead><tr><th>Value</th><th>Score Range</th><th>Display Name</th><th>Description</th></tr></thead><tbody><tr><td><code>NEEDS_WORK</code></td><td>&lt; 0.3</td><td>&quot;Needs Work&quot;</td><td>Significant improvement needed</td></tr><tr><td><code>FAIR</code></td><td>0.3 - 0.6</td><td>&quot;Fair&quot;</td><td>Room for improvement</td></tr><tr><td><code>GOOD</code></td><td>0.6 - 0.8</td><td>&quot;Good&quot;</td><td>Solid performance</td></tr><tr><td><code>VERY_GOOD</code></td><td>0.8 - 0.95</td><td>&quot;Very Good&quot;</td><td>Very strong performance</td></tr><tr><td><code>EXCELLENT</code></td><td>&gt;= 0.95</td><td>&quot;Excellent&quot;</td><td>Outstanding performance</td></tr><tr><td><code>NOT_EVALUATED</code></td><td>N/A</td><td>&quot;Not Evaluated&quot;</td><td>Could not evaluate (insufficient data)</td></tr><tr><td><code>NOT_DETECTED</code></td><td>&lt; 0</td><td>&quot;No Voice&quot;</td><td>No voice detected during segment</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties-4">Properties<a href="#properties-4" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>displayName</code></td><td><code>String</code></td><td>Human-readable display name for UI</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="factory-methods-1">Factory Methods<a href="#factory-methods-1" class="hash-link" aria-label="Direct link to Factory Methods" title="Direct link to Factory Methods" translate="no">​</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>PerformanceLevel.fromScore(score)</code></td><td>Get level based on score (0.0-1.0, negative for NOT_DETECTED)</td></tr><tr><td><code>PerformanceLevel.fromCode(code)</code></td><td>Convert from integer code (for JNI/C interop)</td></tr></tbody></table>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kotlin-1">Kotlin<a href="#kotlin-1" class="hash-link" aria-label="Direct link to Kotlin" title="Direct link to Kotlin" translate="no">​</a></h4>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">val</span><span class="token plain"> level </span><span class="token operator">=</span><span class="token plain"> PerformanceLevel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">fromScore</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.85f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// level == PerformanceLevel.VERY_GOOD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">println</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">level</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">displayName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// &quot;Very Good&quot;</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="swift-1">Swift<a href="#swift-1" class="hash-link" aria-label="Direct link to Swift" title="Direct link to Swift" translate="no">​</a></h4>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> level </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">PerformanceLevel</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">fromScore</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.85</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">// level == .veryGood</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">level</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">displayName</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)">// &quot;Very Good&quot;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="practicephase">PracticePhase<a href="#practicephase" class="hash-link" aria-label="Direct link to PracticePhase" title="Direct link to PracticePhase" translate="no">​</a></h2>
<p>Practice phase during a CalibraLiveEval session.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="phase-progressions">Phase Progressions<a href="#phase-progressions" class="hash-link" aria-label="Direct link to Phase Progressions" title="Direct link to Phase Progressions" translate="no">​</a></h3>
<p><strong>Singalong:</strong> <code>IDLE -&gt; SINGING -&gt; EVALUATED</code></p>
<ul>
<li class="">Student sings with the reference audio simultaneously</li>
</ul>
<p><strong>Singafter:</strong> <code>IDLE -&gt; LISTENING -&gt; SINGING -&gt; EVALUATED</code></p>
<ul>
<li class="">Student listens to reference first, then sings during their turn</li>
</ul>
<table><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>IDLE</code></td><td>Not practicing - waiting to start</td></tr><tr><td><code>LISTENING</code></td><td>Reference playing, student not recording yet (singafter only)</td></tr><tr><td><code>SINGING</code></td><td>Student is being recorded and evaluated</td></tr><tr><td><code>EVALUATED</code></td><td>Segment complete, score available</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sessionphase">SessionPhase<a href="#sessionphase" class="hash-link" aria-label="Direct link to SessionPhase" title="Direct link to SessionPhase" translate="no">​</a></h2>
<p>Current phase of a CalibraLiveEval session.</p>
<table><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>IDLE</code></td><td>Session created but not started</td></tr><tr><td><code>READY</code></td><td>Reference loaded, ready to begin practicing</td></tr><tr><td><code>PRACTICING</code></td><td>Actively capturing and evaluating audio for a segment</td></tr><tr><td><code>BETWEEN_SEGMENTS</code></td><td>Finished one segment, waiting before next</td></tr><tr><td><code>COMPLETED</code></td><td>All segments completed or session manually finished</td></tr><tr><td><code>CANCELLED</code></td><td>Session was cancelled</td></tr><tr><td><code>ERROR</code></td><td>An error occurred</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sessionstate">SessionState<a href="#sessionstate" class="hash-link" aria-label="Direct link to SessionState" title="Direct link to SessionState" translate="no">​</a></h2>
<p>Current state of a CalibraLiveEval session. Exposed as a <code>StateFlow</code> from <code>CalibraLiveEval</code>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties-5">Properties<a href="#properties-5" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>phase</code></td><td><code>SessionPhase</code></td><td>Current phase of the session</td></tr><tr><td><code>activeSegmentIndex</code></td><td><code>Int?</code></td><td>Index of segment being practiced, or null if none</td></tr><tr><td><code>activeSegment</code></td><td><code>Segment?</code></td><td>The segment being practiced, or null if none</td></tr><tr><td><code>currentPitch</code></td><td><code>Float</code></td><td>Current detected pitch in Hz (-1 for unvoiced)</td></tr><tr><td><code>currentAmplitude</code></td><td><code>Float</code></td><td>Current audio amplitude (0.0 - 1.0)</td></tr><tr><td><code>segmentProgress</code></td><td><code>Float</code></td><td>Progress through current segment (0.0 - 1.0)</td></tr><tr><td><code>completedSegments</code></td><td><code>Set&lt;Int&gt;</code></td><td>Set of segment indices that have been completed</td></tr><tr><td><code>error</code></td><td><code>String?</code></td><td>Error message if phase is ERROR, null otherwise</td></tr><tr><td><code>isPracticing</code></td><td><code>Boolean</code></td><td>True if session is actively practicing</td></tr><tr><td><code>canBeginSegment</code></td><td><code>Boolean</code></td><td>True if session is ready to start or between segments</td></tr><tr><td><code>isFinished</code></td><td><code>Boolean</code></td><td>True if session is finished (completed, cancelled, or error)</td></tr><tr><td><code>completedCount</code></td><td><code>Int</code></td><td>Number of completed segments</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="static-members-1">Static Members<a href="#static-members-1" class="hash-link" aria-label="Direct link to Static Members" title="Direct link to Static Members" translate="no">​</a></h3>
<table><thead><tr><th>Member</th><th>Kotlin</th><th>Swift</th><th>Description</th></tr></thead><tbody><tr><td>Idle</td><td><code>SessionState.IDLE</code></td><td><code>.idle</code></td><td>Initial idle state</td></tr><tr><td>Ready</td><td><code>SessionState.ready()</code></td><td><code>SessionState.ready()</code></td><td>Create a ready state</td></tr><tr><td>Error</td><td><code>SessionState.error(message)</code></td><td><code>SessionState.error(message:)</code></td><td>Create an error state</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="activesegmentstate">ActiveSegmentState<a href="#activesegmentstate" class="hash-link" aria-label="Direct link to ActiveSegmentState" title="Direct link to ActiveSegmentState" translate="no">​</a></h2>
<p>State of the currently active segment during practice.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties-6">Properties<a href="#properties-6" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>segmentIndex</code></td><td><code>Int</code></td><td>Index of the segment</td></tr><tr><td><code>segment</code></td><td><code>Segment</code></td><td>The segment being practiced</td></tr><tr><td><code>currentPitch</code></td><td><code>Float</code></td><td>Current detected pitch in Hz (-1 for unvoiced)</td></tr><tr><td><code>currentAmplitude</code></td><td><code>Float</code></td><td>Current audio amplitude (0.0 - 1.0)</td></tr><tr><td><code>elapsedSeconds</code></td><td><code>Float</code></td><td>Time elapsed since segment started</td></tr><tr><td><code>isCapturing</code></td><td><code>Boolean</code></td><td>Whether audio is currently being captured</td></tr><tr><td><code>progress</code></td><td><code>Float</code></td><td>Progress through the segment (0.0 - 1.0)</td></tr><tr><td><code>remainingSeconds</code></td><td><code>Float</code></td><td>Time remaining in seconds</td></tr><tr><td><code>hasVoice</code></td><td><code>Boolean</code></td><td>True if detected pitch is valid</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="sessionconfig">SessionConfig<a href="#sessionconfig" class="hash-link" aria-label="Direct link to SessionConfig" title="Direct link to SessionConfig" translate="no">​</a></h2>
<p>Configuration for a CalibraLiveEval session.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="presets">Presets<a href="#presets" class="hash-link" aria-label="Direct link to Presets" title="Direct link to Presets" translate="no">​</a></h3>
<table><thead><tr><th>Preset</th><th>Kotlin</th><th>Swift</th><th>Description</th></tr></thead><tbody><tr><td>Default</td><td><code>SessionConfig.DEFAULT</code></td><td><code>.default</code></td><td>Balanced, auto-advancing</td></tr><tr><td>Practice</td><td><code>SessionConfig.PRACTICE</code></td><td><code>.practice</code></td><td>Repeats until 70% or 3 attempts, best score</td></tr><tr><td>Karaoke</td><td><code>SessionConfig.KARAOKE</code></td><td><code>.karaoke</code></td><td>Always advances, one attempt</td></tr><tr><td>Performance</td><td><code>SessionConfig.PERFORMANCE</code></td><td><code>.performance</code></td><td>Strict, one attempt, no repetition</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="builder">Builder<a href="#builder" class="hash-link" aria-label="Direct link to Builder" title="Direct link to Builder" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="kotlin-2">Kotlin<a href="#kotlin-2" class="hash-link" aria-label="Direct link to Kotlin" title="Direct link to Kotlin" translate="no">​</a></h4>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">val</span><span class="token plain"> config </span><span class="token operator">=</span><span class="token plain"> SessionConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">Builder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">preset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">SessionConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">PRACTICE</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">scoreThreshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.6f</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">maxAttempts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">resultAggregation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">ResultAggregation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">BEST</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="swift-2">Swift<a href="#swift-2" class="hash-link" aria-label="Direct link to Swift" title="Direct link to Swift" translate="no">​</a></h4>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> config </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">SessionConfig</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token class-name">Builder</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">preset</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">practice</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">scoreThreshold</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">0.6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">maxAttempts</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">5</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">resultAggregation</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">best</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">build</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="config-properties">Config Properties<a href="#config-properties" class="hash-link" aria-label="Direct link to Config Properties" title="Direct link to Config Properties" translate="no">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>autoAdvance</code></td><td><code>Boolean</code></td><td><code>true</code></td><td>Automatically advance to next segment</td></tr><tr><td><code>scoreThreshold</code></td><td><code>Float</code></td><td><code>0</code></td><td>Min score to auto-advance (0 = disabled)</td></tr><tr><td><code>maxAttempts</code></td><td><code>Int</code></td><td><code>0</code></td><td>Max attempts before forced advance (0 = unlimited)</td></tr><tr><td><code>resultAggregation</code></td><td><code>ResultAggregation</code></td><td><code>LATEST</code></td><td>How to aggregate multiple attempts</td></tr><tr><td><code>hopSize</code></td><td><code>Int</code></td><td><code>160</code></td><td>Hop size between frames in samples (160 = 10ms at 16kHz)</td></tr><tr><td><code>autoPhaseTransition</code></td><td><code>Boolean</code></td><td><code>true</code></td><td>Auto transition LISTENING to SINGING in singafter mode</td></tr><tr><td><code>autoSegmentDetection</code></td><td><code>Boolean</code></td><td><code>true</code></td><td>Auto detect segment end from player time</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="builder-methods">Builder Methods<a href="#builder-methods" class="hash-link" aria-label="Direct link to Builder Methods" title="Direct link to Builder Methods" translate="no">​</a></h3>
<table><thead><tr><th>Method</th><th>Description</th></tr></thead><tbody><tr><td><code>preset(config)</code></td><td>Start from a preset configuration</td></tr><tr><td><code>autoAdvance(enabled)</code></td><td>Enable or disable auto-advance</td></tr><tr><td><code>scoreThreshold(threshold)</code></td><td>Set minimum score threshold (0 = disabled)</td></tr><tr><td><code>maxAttempts(max)</code></td><td>Set maximum attempts (0 = unlimited)</td></tr><tr><td><code>resultAggregation(agg)</code></td><td>Set how to aggregate multiple attempts</td></tr><tr><td><code>hopSize(samples)</code></td><td>Set hop size between frames</td></tr><tr><td><code>autoPhaseTransition(enabled)</code></td><td>Enable or disable auto phase transition</td></tr><tr><td><code>autoSegmentDetection(enabled)</code></td><td>Enable or disable auto segment end detection</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="scoringalgorithm">ScoringAlgorithm<a href="#scoringalgorithm" class="hash-link" aria-label="Direct link to ScoringAlgorithm" title="Direct link to ScoringAlgorithm" translate="no">​</a></h2>
<p>Algorithm for computing note accuracy scores.</p>
<table><thead><tr><th>Value</th><th>Description</th></tr></thead><tbody><tr><td><code>SIMPLE</code></td><td>Simple threshold counting. Counts percentage of pitch samples within 35 cents of target. Good for beginners.</td></tr><tr><td><code>WEIGHTED</code></td><td>Weighted duration-aware scoring. Tighter thresholds, considers note duration. Good for advanced evaluation.</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="noteevalconfig">NoteEvalConfig<a href="#noteevalconfig" class="hash-link" aria-label="Direct link to NoteEvalConfig" title="Direct link to NoteEvalConfig" translate="no">​</a></h2>
<p>Configuration for note evaluation scoring.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties-7">Properties<a href="#properties-7" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>algorithm</code></td><td><code>ScoringAlgorithm</code></td><td><code>SIMPLE</code></td><td>Algorithm for computing scores</td></tr><tr><td><code>boundaryToleranceMs</code></td><td><code>Int</code></td><td><code>0</code></td><td>Milliseconds to skip at note start/end</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="presets-1">Presets<a href="#presets-1" class="hash-link" aria-label="Direct link to Presets" title="Direct link to Presets" translate="no">​</a></h3>
<table><thead><tr><th>Preset</th><th>Kotlin</th><th>Swift</th><th>Algorithm</th><th>Boundary Tolerance</th><th>Description</th></tr></thead><tbody><tr><td>Lenient</td><td><code>NoteEvalPreset.LENIENT</code></td><td><code>.lenient</code></td><td>SIMPLE</td><td>200ms</td><td>Beginner-friendly</td></tr><tr><td>Balanced</td><td><code>NoteEvalPreset.BALANCED</code></td><td><code>.balanced</code></td><td>SIMPLE</td><td>100ms</td><td>Standard practice</td></tr><tr><td>Strict</td><td><code>NoteEvalPreset.STRICT</code></td><td><code>.strict</code></td><td>WEIGHTED</td><td>0ms</td><td>Advanced/performance</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="evaluatorconfig">EvaluatorConfig<a href="#evaluatorconfig" class="hash-link" aria-label="Direct link to EvaluatorConfig" title="Direct link to EvaluatorConfig" translate="no">​</a></h2>
<p>Configuration for singing evaluation.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="properties-8">Properties<a href="#properties-8" class="hash-link" aria-label="Direct link to Properties" title="Direct link to Properties" translate="no">​</a></h3>
<table><thead><tr><th>Property</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody><tr><td><code>sampleRate</code></td><td><code>Int</code></td><td><code>16000</code></td><td>Audio sample rate in Hz</td></tr><tr><td><code>semitoneShift</code></td><td><code>Int</code></td><td><code>0</code></td><td>Transpose reference by this many semitones</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="presets-2">Presets<a href="#presets-2" class="hash-link" aria-label="Direct link to Presets" title="Direct link to Presets" translate="no">​</a></h3>
<table><thead><tr><th>Preset</th><th>Kotlin</th><th>Swift</th><th>Semitone Shift</th><th>Description</th></tr></thead><tbody><tr><td>Standard</td><td><code>EvaluatorPreset.STANDARD</code></td><td><code>.standard</code></td><td>0</td><td>Standard evaluation at original pitch</td></tr><tr><td>Male to Female</td><td><code>EvaluatorPreset.MALE_TO_FEMALE</code></td><td><code>.maleToFemale</code></td><td>+12</td><td>Transpose up one octave</td></tr><tr><td>Female to Male</td><td><code>EvaluatorPreset.FEMALE_TO_MALE</code></td><td><code>.femaleToMale</code></td><td>-12</td><td>Transpose down one octave</td></tr><tr><td>Transpose Up</td><td><code>EvaluatorPreset.TRANSPOSE_UP</code></td><td><code>.transposeUp</code></td><td>+2</td><td>Slight pitch adjustment up</td></tr><tr><td>Transpose Down</td><td><code>EvaluatorPreset.TRANSPOSE_DOWN</code></td><td><code>.transposeDown</code></td><td>-2</td><td>Slight pitch adjustment down</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="breathmetrics">BreathMetrics<a href="#breathmetrics" class="hash-link" aria-label="Direct link to BreathMetrics" title="Direct link to BreathMetrics" translate="no">​</a></h2>
<p>Result of breath analysis containing capacity and control metrics.</p>
<table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>capacity</code></td><td><code>Float</code></td><td>Breath capacity in seconds - measures longest sustained phrase</td></tr><tr><td><code>control</code></td><td><code>Float</code></td><td>Breath control score (0.0 to 1.0) - measures breathing pattern consistency</td></tr><tr><td><code>isValid</code></td><td><code>Boolean</code></td><td>Whether the result is valid (enough data was available)</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="error-types">Error Types<a href="#error-types" class="hash-link" aria-label="Direct link to Error Types" title="Direct link to Error Types" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="kotlin-3">Kotlin<a href="#kotlin-3" class="hash-link" aria-label="Direct link to Kotlin" title="Direct link to Kotlin" translate="no">​</a></h3>
<p>Calibra uses <code>CalibraException</code> with a <code>CalibraErrorType</code> enum:</p>
<table><thead><tr><th>Error Type</th><th>Description</th></tr></thead><tbody><tr><td><code>INITIALIZATION_FAILED</code></td><td>Failed to initialize native library</td></tr><tr><td><code>INVALID_CONFIG</code></td><td>Invalid configuration parameters</td></tr><tr><td><code>ALLOCATION_FAILED</code></td><td>Native resource allocation failed</td></tr><tr><td><code>PROCESSING_ERROR</code></td><td>Processing error</td></tr><tr><td><code>FILE_ERROR</code></td><td>File not found or inaccessible</td></tr><tr><td><code>UNKNOWN</code></td><td>Unknown error</td></tr></tbody></table>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">val</span><span class="token plain"> detector </span><span class="token operator">=</span><span class="token plain"> CalibraPitch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">createDetector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token operator">:</span><span class="token plain"> CalibraException</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">when</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">e</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">type</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        CalibraErrorType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">INITIALIZATION_FAILED </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">println</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;Init failed: </span><span class="token string-literal singleline interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token string-literal singleline interpolation expression">e</span><span class="token string-literal singleline interpolation expression punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token string-literal singleline interpolation expression">message</span><span class="token string-literal singleline interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        CalibraErrorType</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">INVALID_CONFIG </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">println</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;Bad config: </span><span class="token string-literal singleline interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token string-literal singleline interpolation expression">e</span><span class="token string-literal singleline interpolation expression punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token string-literal singleline interpolation expression">message</span><span class="token string-literal singleline interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">else</span><span class="token plain"> </span><span class="token operator">-&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">println</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;Error: </span><span class="token string-literal singleline interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">${</span><span class="token string-literal singleline interpolation expression">e</span><span class="token string-literal singleline interpolation expression punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token string-literal singleline interpolation expression">message</span><span class="token string-literal singleline interpolation interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-literal singleline string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="swift-3">Swift<a href="#swift-3" class="hash-link" aria-label="Direct link to Swift" title="Direct link to Swift" translate="no">​</a></h3>
<p>Calibra provides typed error enums on iOS for each subsystem. All conform to <code>LocalizedError</code> and provide descriptive <code>errorDescription</code> messages.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="pitchdetectorerror">PitchDetectorError<a href="#pitchdetectorerror" class="hash-link" aria-label="Direct link to PitchDetectorError" title="Direct link to PitchDetectorError" translate="no">​</a></h3>
<table><thead><tr><th>Case</th><th>Parameters</th><th>Description</th></tr></thead><tbody><tr><td><code>initializationFailed</code></td><td><code>reason: String</code></td><td>Failed to initialize pitch detector</td></tr><tr><td><code>detectionFailed</code></td><td><code>reason: String</code></td><td>Pitch detection failed</td></tr><tr><td><code>invalidSampleRate</code></td><td><code>rate: Int</code></td><td>Invalid sample rate (expected 16000 Hz)</td></tr><tr><td><code>bufferTooSmall</code></td><td><code>size: Int, required: Int</code></td><td>Buffer too small for detection</td></tr></tbody></table>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">do</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> detector </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token class-name">CalibraPitch</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">createDetector</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> error </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token class-name">PitchDetectorError</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token function" style="color:rgb(80, 250, 123)">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">localizedDescription</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="evaluatorerror">EvaluatorError<a href="#evaluatorerror" class="hash-link" aria-label="Direct link to EvaluatorError" title="Direct link to EvaluatorError" translate="no">​</a></h3>
<table><thead><tr><th>Case</th><th>Parameters</th><th>Description</th></tr></thead><tbody><tr><td><code>initializationFailed</code></td><td><code>reason: String</code></td><td>Failed to initialize evaluator</td></tr><tr><td><code>invalidReference</code></td><td><code>reason: String</code></td><td>Invalid reference audio</td></tr><tr><td><code>evaluationFailed</code></td><td><code>reason: String</code></td><td>Evaluation failed</td></tr><tr><td><code>segmentNotFound</code></td><td><code>index: Int</code></td><td>Segment not found at given index</td></tr><tr><td><code>captureNotStarted</code></td><td>(none)</td><td>Capture was not started before evaluation</td></tr><tr><td><code>yamlParsingFailed</code></td><td><code>path: String</code></td><td>Failed to parse YAML file</td></tr></tbody></table>
<div class="language-swift codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-swift codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">do</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> session </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token plain"> </span><span class="token class-name">CalibraLiveEval</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">create</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">reference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> material</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> config</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">catch</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> error </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">as</span><span class="token plain"> </span><span class="token class-name">EvaluatorError</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">switch</span><span class="token plain"> error </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">case</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token function" style="color:rgb(80, 250, 123)">invalidReference</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">let</span><span class="token plain"> reason</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;Invalid reference: </span><span class="token string-literal interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">\(</span><span class="token string-literal interpolation">reason</span><span class="token string-literal interpolation-punctuation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token string-literal string" style="color:rgb(255, 121, 198)">&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">default</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token function" style="color:rgb(80, 250, 123)">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">error</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">localizedDescription</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="effectserror">EffectsError<a href="#effectserror" class="hash-link" aria-label="Direct link to EffectsError" title="Direct link to EffectsError" translate="no">​</a></h3>
<table><thead><tr><th>Case</th><th>Parameters</th><th>Description</th></tr></thead><tbody><tr><td><code>initializationFailed</code></td><td><code>effect: String, reason: String</code></td><td>Failed to initialize effect</td></tr><tr><td><code>processingFailed</code></td><td><code>effect: String, reason: String</code></td><td>Effect processing failed</td></tr><tr><td><code>invalidParameter</code></td><td><code>name: String, value: Float, range: String</code></td><td>Invalid parameter value</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="analysiserror">AnalysisError<a href="#analysiserror" class="hash-link" aria-label="Direct link to AnalysisError" title="Direct link to AnalysisError" translate="no">​</a></h3>
<table><thead><tr><th>Case</th><th>Parameters</th><th>Description</th></tr></thead><tbody><tr><td><code>insufficientData</code></td><td><code>required: String, actual: String</code></td><td>Not enough data for analysis</td></tr><tr><td><code>detectionFailed</code></td><td><code>type: String, reason: String</code></td><td>Detection failed</td></tr><tr><td><code>invalidInput</code></td><td><code>parameter: String, reason: String</code></td><td>Invalid input parameter</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="timeutils">TimeUtils<a href="#timeutils" class="hash-link" aria-label="Direct link to TimeUtils" title="Direct link to TimeUtils" translate="no">​</a></h2>
<p>Platform-specific current time utility used internally for benchmarking in public APIs.</p>
<div class="language-kotlin codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-kotlin codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">// Internal API — not directly consumed by SDK users</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">internal</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">expect</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">fun</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">currentTimeMillis</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token operator">:</span><span class="token plain"> Long</span><br></span></code></pre></div></div>
<p><code>currentTimeMillis()</code> is an internal <code>expect</code>/<code>actual</code> function that returns the current time in milliseconds. Each platform provides its own implementation. This is used internally by Calibra APIs for performance timing and benchmarking; it is not part of the public API surface.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps" translate="no">​</a></h2>
<ul>
<li class=""><a class="" href="/voxatrace/calibra/pitch">CalibraPitch</a> -- Real-time pitch detection</li>
<li class=""><a class="" href="/voxatrace/calibra/vad">CalibraVAD</a> -- Voice activity detection</li>
<li class=""><a class="" href="/voxatrace/calibra/vocal-range">CalibraVocalRange</a> -- Detect singer&#x27;s comfortable range</li>
</ul></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/voxatrace/calibra/effects"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">CalibraEffects</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lessonmaterial" class="table-of-contents__link toc-highlight">LessonMaterial</a><ul><li><a href="#creating-lessonmaterial" class="table-of-contents__link toc-highlight">Creating LessonMaterial</a></li><li><a href="#properties" class="table-of-contents__link toc-highlight">Properties</a></li></ul></li><li><a href="#audiosource" class="table-of-contents__link toc-highlight">AudioSource</a></li><li><a href="#segment" class="table-of-contents__link toc-highlight">Segment</a><ul><li><a href="#creating-segments" class="table-of-contents__link toc-highlight">Creating Segments</a></li><li><a href="#properties-1" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#factory-methods" class="table-of-contents__link toc-highlight">Factory Methods</a></li></ul></li><li><a href="#segmentresult" class="table-of-contents__link toc-highlight">SegmentResult</a><ul><li><a href="#properties-2" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#swift-pitch-data-extensions" class="table-of-contents__link toc-highlight">Swift Pitch Data Extensions</a></li><li><a href="#factory-method" class="table-of-contents__link toc-highlight">Factory Method</a></li></ul></li><li><a href="#singingresult" class="table-of-contents__link toc-highlight">SingingResult</a><ul><li><a href="#properties-3" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#methods" class="table-of-contents__link toc-highlight">Methods</a></li><li><a href="#swift-convenience-methods" class="table-of-contents__link toc-highlight">Swift Convenience Methods</a></li><li><a href="#static-members" class="table-of-contents__link toc-highlight">Static Members</a></li></ul></li><li><a href="#resultaggregation" class="table-of-contents__link toc-highlight">ResultAggregation</a></li><li><a href="#performancelevel" class="table-of-contents__link toc-highlight">PerformanceLevel</a><ul><li><a href="#values" class="table-of-contents__link toc-highlight">Values</a></li><li><a href="#properties-4" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#factory-methods-1" class="table-of-contents__link toc-highlight">Factory Methods</a></li></ul></li><li><a href="#practicephase" class="table-of-contents__link toc-highlight">PracticePhase</a><ul><li><a href="#phase-progressions" class="table-of-contents__link toc-highlight">Phase Progressions</a></li></ul></li><li><a href="#sessionphase" class="table-of-contents__link toc-highlight">SessionPhase</a></li><li><a href="#sessionstate" class="table-of-contents__link toc-highlight">SessionState</a><ul><li><a href="#properties-5" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#static-members-1" class="table-of-contents__link toc-highlight">Static Members</a></li></ul></li><li><a href="#activesegmentstate" class="table-of-contents__link toc-highlight">ActiveSegmentState</a><ul><li><a href="#properties-6" class="table-of-contents__link toc-highlight">Properties</a></li></ul></li><li><a href="#sessionconfig" class="table-of-contents__link toc-highlight">SessionConfig</a><ul><li><a href="#presets" class="table-of-contents__link toc-highlight">Presets</a></li><li><a href="#builder" class="table-of-contents__link toc-highlight">Builder</a></li><li><a href="#config-properties" class="table-of-contents__link toc-highlight">Config Properties</a></li><li><a href="#builder-methods" class="table-of-contents__link toc-highlight">Builder Methods</a></li></ul></li><li><a href="#scoringalgorithm" class="table-of-contents__link toc-highlight">ScoringAlgorithm</a></li><li><a href="#noteevalconfig" class="table-of-contents__link toc-highlight">NoteEvalConfig</a><ul><li><a href="#properties-7" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#presets-1" class="table-of-contents__link toc-highlight">Presets</a></li></ul></li><li><a href="#evaluatorconfig" class="table-of-contents__link toc-highlight">EvaluatorConfig</a><ul><li><a href="#properties-8" class="table-of-contents__link toc-highlight">Properties</a></li><li><a href="#presets-2" class="table-of-contents__link toc-highlight">Presets</a></li></ul></li><li><a href="#breathmetrics" class="table-of-contents__link toc-highlight">BreathMetrics</a></li><li><a href="#error-types" class="table-of-contents__link toc-highlight">Error Types</a><ul><li><a href="#kotlin-3" class="table-of-contents__link toc-highlight">Kotlin</a></li><li><a href="#swift-3" class="table-of-contents__link toc-highlight">Swift</a></li><li><a href="#pitchdetectorerror" class="table-of-contents__link toc-highlight">PitchDetectorError</a></li><li><a href="#evaluatorerror" class="table-of-contents__link toc-highlight">EvaluatorError</a></li><li><a href="#effectserror" class="table-of-contents__link toc-highlight">EffectsError</a></li><li><a href="#analysiserror" class="table-of-contents__link toc-highlight">AnalysisError</a></li></ul></li><li><a href="#timeutils" class="table-of-contents__link toc-highlight">TimeUtils</a></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/voxatrace/">Getting Started</a></li><li class="footer__item"><a href="/voxatrace/api/index.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">API Reference<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/musicmuni/voxatrace" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 MusicMuni.</div></div></div></footer></div>
</body>
</html>